import{jsx as z,jsxs as ge,Fragment as qe}from"react/jsx-runtime";import ei,{createContext as Rs,forwardRef as zs,memo as me,useContext as ir,useMemo as Ve,useEffect as le,useRef as oe,useState as yt,useCallback as ue,useLayoutEffect as Xc}from"react";import{ak as Yc}from"../client-entry.js";import"react-dom";var ie;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},e.getValidEnumValues=i=>{const s=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},e.find=(i,s)=>{for(const o of i)if(s(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}e.joinValues=r,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ie||(ie={}));var Pr;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(Pr||(Pr={}));const X=ie.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),nt=e=>{switch(typeof e){case"undefined":return X.undefined;case"string":return X.string;case"number":return isNaN(e)?X.nan:X.number;case"boolean":return X.boolean;case"function":return X.function;case"bigint":return X.bigint;case"symbol":return X.symbol;case"object":return Array.isArray(e)?X.array:e===null?X.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?X.promise:typeof Map<"u"&&e instanceof Map?X.map:typeof Set<"u"&&e instanceof Set?X.set:typeof Date<"u"&&e instanceof Date?X.date:X.object;default:return X.unknown}},O=ie.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),jc=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class $e extends Error{constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const n=t||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,ie.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}$e.create=e=>new $e(e);const Ft=(e,t)=>{let n;switch(e.code){case O.invalid_type:e.received===X.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case O.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,ie.jsonStringifyReplacer)}`;break;case O.unrecognized_keys:n=`Unrecognized key(s) in object: ${ie.joinValues(e.keys,", ")}`;break;case O.invalid_union:n="Invalid input";break;case O.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ie.joinValues(e.options)}`;break;case O.invalid_enum_value:n=`Invalid enum value. Expected ${ie.joinValues(e.options)}, received '${e.received}'`;break;case O.invalid_arguments:n="Invalid function arguments";break;case O.invalid_return_type:n="Invalid function return type";break;case O.invalid_date:n="Invalid date";break;case O.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:ie.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case O.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case O.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case O.custom:n="Invalid input";break;case O.invalid_intersection_types:n="Intersection results could not be merged";break;case O.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case O.not_finite:n="Number must be finite";break;default:n=t.defaultError,ie.assertNever(e)}return{message:n}};let Ps=Ft;function Uc(e){Ps=e}function Pn(){return Ps}const Dn=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,s=[...n,...i.path||[]],o={...i,path:s};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:t,defaultError:a}).message;return{...i,path:s,message:i.message||a}},Fc=[];function Y(e,t){const n=Dn({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Pn(),Ft].filter(r=>!!r)});e.common.issues.push(n)}class we{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return K;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n)r.push({key:await i.key,value:await i.value});return we.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return K;s.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:t.value,value:r}}}const K=Object.freeze({status:"aborted"}),Ds=e=>({status:"dirty",value:e}),_e=e=>({status:"valid",value:e}),Dr=e=>e.status==="aborted",Or=e=>e.status==="dirty",Wt=e=>e.status==="valid",On=e=>typeof Promise<"u"&&e instanceof Promise;var F;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(F||(F={}));class He{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ti=(e,t)=>{if(Wt(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new $e(e.common.issues);return this._error=n,this._error}}};function J(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:i}}class te{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return nt(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:nt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new we,ctx:{common:t.parent.common,data:t.data,parsedType:nt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(On(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:nt(t)},s=this._parseSync({data:t,path:i.path,parent:i});return Ti(i,s)}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:nt(t)},i=this._parse({data:t,path:r.path,parent:r}),s=await(On(i)?i:Promise.resolve(i));return Ti(r,s)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=t(i),a=()=>s.addIssue({code:O.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new ze({schema:this,typeName:q.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return je.create(this,this._def)}nullable(){return wt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Re.create(this,this._def)}promise(){return It.create(this,this._def)}or(t){return Qt.create([this,t],this._def)}and(t){return Jt.create(this,t,this._def)}transform(t){return new ze({...J(this._def),schema:this,typeName:q.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new sn({...J(this._def),innerType:this,defaultValue:n,typeName:q.ZodDefault})}brand(){return new Vs({typeName:q.ZodBranded,type:this,...J(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Zn({...J(this._def),innerType:this,catchValue:n,typeName:q.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return pn.create(this,t)}readonly(){return Xn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Wc=/^c[^\s-]{8,}$/i,qc=/^[a-z][a-z0-9]*$/,Gc=/^[0-9A-HJKMNP-TV-Z]{26}$/,Kc=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Qc=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Jc="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let br;const el=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,tl=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,nl=e=>e.precision?e.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):e.precision===0?e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function rl(e,t){return!!((t==="v4"||!t)&&el.test(e)||(t==="v6"||!t)&&tl.test(e))}class Ie extends te{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==X.string){const s=this._getOrReturnCtx(t);return Y(s,{code:O.invalid_type,expected:X.string,received:s.parsedType}),K}const r=new we;let i;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),Y(i,{code:O.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),Y(i,{code:O.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=t.data.length>s.value,a=t.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(t,i),o?Y(i,{code:O.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Y(i,{code:O.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")Qc.test(t.data)||(i=this._getOrReturnCtx(t,i),Y(i,{validation:"email",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")br||(br=new RegExp(Jc,"u")),br.test(t.data)||(i=this._getOrReturnCtx(t,i),Y(i,{validation:"emoji",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")Kc.test(t.data)||(i=this._getOrReturnCtx(t,i),Y(i,{validation:"uuid",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")Wc.test(t.data)||(i=this._getOrReturnCtx(t,i),Y(i,{validation:"cuid",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")qc.test(t.data)||(i=this._getOrReturnCtx(t,i),Y(i,{validation:"cuid2",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")Gc.test(t.data)||(i=this._getOrReturnCtx(t,i),Y(i,{validation:"ulid",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Y(i,{validation:"url",code:O.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Y(i,{validation:"regex",code:O.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),Y(i,{code:O.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),Y(i,{code:O.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),Y(i,{code:O.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?nl(s).test(t.data)||(i=this._getOrReturnCtx(t,i),Y(i,{code:O.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?rl(t.data,s.version)||(i=this._getOrReturnCtx(t,i),Y(i,{validation:"ip",code:O.invalid_string,message:s.message}),r.dirty()):ie.assertNever(s);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:O.invalid_string,...F.errToObj(r)})}_addCheck(t){return new Ie({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...F.errToObj(t)})}url(t){return this._addCheck({kind:"url",...F.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...F.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...F.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...F.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...F.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...F.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...F.errToObj(t)})}datetime(t){var n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,...F.errToObj(t==null?void 0:t.message)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...F.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...F.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...F.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...F.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...F.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...F.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...F.errToObj(n)})}nonempty(t){return this.min(1,F.errToObj(t))}trim(){return new Ie({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ie({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ie({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ie.create=e=>{var t;return new Ie({checks:[],typeName:q.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...J(e)})};function il(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(e.toFixed(i).replace(".","")),o=parseInt(t.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class st extends te{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==X.number){const s=this._getOrReturnCtx(t);return Y(s,{code:O.invalid_type,expected:X.number,received:s.parsedType}),K}let r;const i=new we;for(const s of this._def.checks)s.kind==="int"?ie.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Y(r,{code:O.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),Y(r,{code:O.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),Y(r,{code:O.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?il(t.data,s.value)!==0&&(r=this._getOrReturnCtx(t,r),Y(r,{code:O.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Y(r,{code:O.not_finite,message:s.message}),i.dirty()):ie.assertNever(s);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,F.toString(n))}gt(t,n){return this.setLimit("min",t,!1,F.toString(n))}lte(t,n){return this.setLimit("max",t,!0,F.toString(n))}lt(t,n){return this.setLimit("max",t,!1,F.toString(n))}setLimit(t,n,r,i){return new st({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:F.toString(i)}]})}_addCheck(t){return new st({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:F.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:F.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:F.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:F.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:F.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:F.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:F.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:F.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:F.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ie.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}st.create=e=>new st({checks:[],typeName:q.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...J(e)});class ot extends te{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==X.bigint){const s=this._getOrReturnCtx(t);return Y(s,{code:O.invalid_type,expected:X.bigint,received:s.parsedType}),K}let r;const i=new we;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),Y(r,{code:O.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),Y(r,{code:O.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Y(r,{code:O.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ie.assertNever(s);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,F.toString(n))}gt(t,n){return this.setLimit("min",t,!1,F.toString(n))}lte(t,n){return this.setLimit("max",t,!0,F.toString(n))}lt(t,n){return this.setLimit("max",t,!1,F.toString(n))}setLimit(t,n,r,i){return new ot({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:F.toString(i)}]})}_addCheck(t){return new ot({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:F.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:F.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:F.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:F.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:F.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ot.create=e=>{var t;return new ot({checks:[],typeName:q.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...J(e)})};class qt extends te{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==X.boolean){const r=this._getOrReturnCtx(t);return Y(r,{code:O.invalid_type,expected:X.boolean,received:r.parsedType}),K}return _e(t.data)}}qt.create=e=>new qt({typeName:q.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...J(e)});class vt extends te{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==X.date){const s=this._getOrReturnCtx(t);return Y(s,{code:O.invalid_type,expected:X.date,received:s.parsedType}),K}if(isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return Y(s,{code:O.invalid_date}),K}const r=new we;let i;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),Y(i,{code:O.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),Y(i,{code:O.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ie.assertNever(s);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new vt({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:F.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:F.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}vt.create=e=>new vt({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:q.ZodDate,...J(e)});class Vn extends te{_parse(t){if(this._getType(t)!==X.symbol){const r=this._getOrReturnCtx(t);return Y(r,{code:O.invalid_type,expected:X.symbol,received:r.parsedType}),K}return _e(t.data)}}Vn.create=e=>new Vn({typeName:q.ZodSymbol,...J(e)});class Gt extends te{_parse(t){if(this._getType(t)!==X.undefined){const r=this._getOrReturnCtx(t);return Y(r,{code:O.invalid_type,expected:X.undefined,received:r.parsedType}),K}return _e(t.data)}}Gt.create=e=>new Gt({typeName:q.ZodUndefined,...J(e)});class Kt extends te{_parse(t){if(this._getType(t)!==X.null){const r=this._getOrReturnCtx(t);return Y(r,{code:O.invalid_type,expected:X.null,received:r.parsedType}),K}return _e(t.data)}}Kt.create=e=>new Kt({typeName:q.ZodNull,...J(e)});class At extends te{constructor(){super(...arguments),this._any=!0}_parse(t){return _e(t.data)}}At.create=e=>new At({typeName:q.ZodAny,...J(e)});class pt extends te{constructor(){super(...arguments),this._unknown=!0}_parse(t){return _e(t.data)}}pt.create=e=>new pt({typeName:q.ZodUnknown,...J(e)});class Fe extends te{_parse(t){const n=this._getOrReturnCtx(t);return Y(n,{code:O.invalid_type,expected:X.never,received:n.parsedType}),K}}Fe.create=e=>new Fe({typeName:q.ZodNever,...J(e)});class Hn extends te{_parse(t){if(this._getType(t)!==X.undefined){const r=this._getOrReturnCtx(t);return Y(r,{code:O.invalid_type,expected:X.void,received:r.parsedType}),K}return _e(t.data)}}Hn.create=e=>new Hn({typeName:q.ZodVoid,...J(e)});class Re extends te{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==X.array)return Y(n,{code:O.invalid_type,expected:X.array,received:n.parsedType}),K;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(Y(n,{code:o?O.too_big:O.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Y(n,{code:O.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Y(n,{code:O.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new He(n,o,n.path,a)))).then(o=>we.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new He(n,o,n.path,a)));return we.mergeArray(r,s)}get element(){return this._def.type}min(t,n){return new Re({...this._def,minLength:{value:t,message:F.toString(n)}})}max(t,n){return new Re({...this._def,maxLength:{value:t,message:F.toString(n)}})}length(t,n){return new Re({...this._def,exactLength:{value:t,message:F.toString(n)}})}nonempty(t){return this.min(1,t)}}Re.create=(e,t)=>new Re({type:e,minLength:null,maxLength:null,exactLength:null,typeName:q.ZodArray,...J(t)});function kt(e){if(e instanceof ce){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=je.create(kt(r))}return new ce({...e._def,shape:()=>t})}else return e instanceof Re?new Re({...e._def,type:kt(e.element)}):e instanceof je?je.create(kt(e.unwrap())):e instanceof wt?wt.create(kt(e.unwrap())):e instanceof Le?Le.create(e.items.map(t=>kt(t))):e}class ce extends te{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=ie.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==X.object){const l=this._getOrReturnCtx(t);return Y(l,{code:O.invalid_type,expected:X.object,received:l.parsedType}),K}const{status:r,ctx:i}=this._processInputParams(t),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Fe&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=s[l],d=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new He(i,d,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof Fe){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(l==="strict")a.length>0&&(Y(i,{code:O.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new He(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>we.mergeObjectSync(r,l)):we.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(t){return F.errToObj,new ce({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=F.errToObj(t).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new ce({...this._def,unknownKeys:"strip"})}passthrough(){return new ce({...this._def,unknownKeys:"passthrough"})}extend(t){return new ce({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ce({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:q.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new ce({...this._def,catchall:t})}pick(t){const n={};return ie.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new ce({...this._def,shape:()=>n})}omit(t){const n={};return ie.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new ce({...this._def,shape:()=>n})}deepPartial(){return kt(this)}partial(t){const n={};return ie.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}),new ce({...this._def,shape:()=>n})}required(t){const n={};return ie.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof je;)s=s._def.innerType;n[r]=s}}),new ce({...this._def,shape:()=>n})}keyof(){return Os(ie.objectKeys(this.shape))}}ce.create=(e,t)=>new ce({shape:()=>e,unknownKeys:"strip",catchall:Fe.create(),typeName:q.ZodObject,...J(t)});ce.strictCreate=(e,t)=>new ce({shape:()=>e,unknownKeys:"strict",catchall:Fe.create(),typeName:q.ZodObject,...J(t)});ce.lazycreate=(e,t)=>new ce({shape:e,unknownKeys:"strip",catchall:Fe.create(),typeName:q.ZodObject,...J(t)});class Qt extends te{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new $e(a.ctx.common.issues));return Y(n,{code:O.invalid_union,unionErrors:o}),K}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new $e(c));return Y(n,{code:O.invalid_union,unionErrors:a}),K}}get options(){return this._def.options}}Qt.create=(e,t)=>new Qt({options:e,typeName:q.ZodUnion,...J(t)});const An=e=>e instanceof tn?An(e.schema):e instanceof ze?An(e.innerType()):e instanceof nn?[e.value]:e instanceof at?e.options:e instanceof rn?Object.keys(e.enum):e instanceof sn?An(e._def.innerType):e instanceof Gt?[void 0]:e instanceof Kt?[null]:null;class sr extends te{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==X.object)return Y(n,{code:O.invalid_type,expected:X.object,received:n.parsedType}),K;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(Y(n,{code:O.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),K)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const s of n){const o=An(s.shape[t]);if(!o)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);i.set(a,s)}}return new sr({typeName:q.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...J(r)})}}function Vr(e,t){const n=nt(e),r=nt(t);if(e===t)return{valid:!0,data:e};if(n===X.object&&r===X.object){const i=ie.objectKeys(t),s=ie.objectKeys(e).filter(a=>i.indexOf(a)!==-1),o={...e,...t};for(const a of s){const c=Vr(e[a],t[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===X.array&&r===X.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const o=e[s],a=t[s],c=Vr(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===X.date&&r===X.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Jt extends te{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(s,o)=>{if(Dr(s)||Dr(o))return K;const a=Vr(s.value,o.value);return a.valid?((Or(s)||Or(o))&&n.dirty(),{status:n.value,value:a.data}):(Y(r,{code:O.invalid_intersection_types}),K)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Jt.create=(e,t,n)=>new Jt({left:e,right:t,typeName:q.ZodIntersection,...J(n)});class Le extends te{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==X.array)return Y(r,{code:O.invalid_type,expected:X.array,received:r.parsedType}),K;if(r.data.length<this._def.items.length)return Y(r,{code:O.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),K;!this._def.rest&&r.data.length>this._def.items.length&&(Y(r,{code:O.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new He(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>we.mergeArray(n,o)):we.mergeArray(n,s)}get items(){return this._def.items}rest(t){return new Le({...this._def,rest:t})}}Le.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Le({items:e,typeName:q.ZodTuple,rest:null,...J(t)})};class en extends te{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==X.object)return Y(r,{code:O.invalid_type,expected:X.object,received:r.parsedType}),K;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new He(r,a,r.path,a)),value:o._parse(new He(r,r.data[a],r.path,a))});return r.common.async?we.mergeObjectAsync(n,i):we.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof te?new en({keyType:t,valueType:n,typeName:q.ZodRecord,...J(r)}):new en({keyType:Ie.create(),valueType:t,typeName:q.ZodRecord,...J(n)})}}class Ln extends te{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==X.map)return Y(r,{code:O.invalid_type,expected:X.map,received:r.parsedType}),K;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:i._parse(new He(r,a,r.path,[l,"key"])),value:s._parse(new He(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return K;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return K;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}Ln.create=(e,t,n)=>new Ln({valueType:t,keyType:e,typeName:q.ZodMap,...J(n)});class xt extends te{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==X.set)return Y(r,{code:O.invalid_type,expected:X.set,received:r.parsedType}),K;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Y(r,{code:O.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Y(r,{code:O.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return K;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>s._parse(new He(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(t,n){return new xt({...this._def,minSize:{value:t,message:F.toString(n)}})}max(t,n){return new xt({...this._def,maxSize:{value:t,message:F.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}xt.create=(e,t)=>new xt({valueType:e,minSize:null,maxSize:null,typeName:q.ZodSet,...J(t)});class Tt extends te{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==X.function)return Y(n,{code:O.invalid_type,expected:X.function,received:n.parsedType}),K;function r(a,c){return Dn({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Pn(),Ft].filter(l=>!!l),issueData:{code:O.invalid_arguments,argumentsError:c}})}function i(a,c){return Dn({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Pn(),Ft].filter(l=>!!l),issueData:{code:O.invalid_return_type,returnTypeError:c}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof It){const a=this;return _e(async function(...c){const l=new $e([]),u=await a._def.args.parseAsync(c,s).catch(g=>{throw l.addIssue(r(c,g)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,s).catch(g=>{throw l.addIssue(i(d,g)),l})})}else{const a=this;return _e(function(...c){const l=a._def.args.safeParse(c,s);if(!l.success)throw new $e([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,s);if(!d.success)throw new $e([i(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Tt({...this._def,args:Le.create(t).rest(pt.create())})}returns(t){return new Tt({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new Tt({args:t||Le.create([]).rest(pt.create()),returns:n||pt.create(),typeName:q.ZodFunction,...J(r)})}}class tn extends te{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}tn.create=(e,t)=>new tn({getter:e,typeName:q.ZodLazy,...J(t)});class nn extends te{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Y(n,{received:n.data,code:O.invalid_literal,expected:this._def.value}),K}return{status:"valid",value:t.data}}get value(){return this._def.value}}nn.create=(e,t)=>new nn({value:e,typeName:q.ZodLiteral,...J(t)});function Os(e,t){return new at({values:e,typeName:q.ZodEnum,...J(t)})}class at extends te{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Y(n,{expected:ie.joinValues(r),received:n.parsedType,code:O.invalid_type}),K}if(this._def.values.indexOf(t.data)===-1){const n=this._getOrReturnCtx(t),r=this._def.values;return Y(n,{received:n.data,code:O.invalid_enum_value,options:r}),K}return _e(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t){return at.create(t)}exclude(t){return at.create(this.options.filter(n=>!t.includes(n)))}}at.create=Os;class rn extends te{_parse(t){const n=ie.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==X.string&&r.parsedType!==X.number){const i=ie.objectValues(n);return Y(r,{expected:ie.joinValues(i),received:r.parsedType,code:O.invalid_type}),K}if(n.indexOf(t.data)===-1){const i=ie.objectValues(n);return Y(r,{received:r.data,code:O.invalid_enum_value,options:i}),K}return _e(t.data)}get enum(){return this._def.values}}rn.create=(e,t)=>new rn({values:e,typeName:q.ZodNativeEnum,...J(t)});class It extends te{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==X.promise&&n.common.async===!1)return Y(n,{code:O.invalid_type,expected:X.promise,received:n.parsedType}),K;const r=n.parsedType===X.promise?n.data:Promise.resolve(n.data);return _e(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}It.create=(e,t)=>new It({type:e,typeName:q.ZodPromise,...J(t)});class ze extends te{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===q.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,s={addIssue:o=>{Y(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?K:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?K:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Wt(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Wt(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);ie.assertNever(i)}}ze.create=(e,t,n)=>new ze({schema:e,typeName:q.ZodEffects,effect:t,...J(n)});ze.createWithPreprocess=(e,t,n)=>new ze({schema:t,effect:{type:"preprocess",transform:e},typeName:q.ZodEffects,...J(n)});class je extends te{_parse(t){return this._getType(t)===X.undefined?_e(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}je.create=(e,t)=>new je({innerType:e,typeName:q.ZodOptional,...J(t)});class wt extends te{_parse(t){return this._getType(t)===X.null?_e(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}wt.create=(e,t)=>new wt({innerType:e,typeName:q.ZodNullable,...J(t)});class sn extends te{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===X.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}sn.create=(e,t)=>new sn({innerType:e,typeName:q.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...J(t)});class Zn extends te{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return On(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new $e(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new $e(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Zn.create=(e,t)=>new Zn({innerType:e,typeName:q.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...J(t)});class Bn extends te{_parse(t){if(this._getType(t)!==X.nan){const r=this._getOrReturnCtx(t);return Y(r,{code:O.invalid_type,expected:X.nan,received:r.parsedType}),K}return{status:"valid",value:t.data}}}Bn.create=e=>new Bn({typeName:q.ZodNaN,...J(e)});const sl=Symbol("zod_brand");class Vs extends te{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class pn extends te{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?K:s.status==="dirty"?(n.dirty(),Ds(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?K:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new pn({in:t,out:n,typeName:q.ZodPipeline})}}class Xn extends te{_parse(t){const n=this._def.innerType._parse(t);return Wt(n)&&(n.value=Object.freeze(n.value)),n}}Xn.create=(e,t)=>new Xn({innerType:e,typeName:q.ZodReadonly,...J(t)});const Hs=(e,t={},n)=>e?At.create().superRefine((r,i)=>{var s,o;if(!e(r)){const a=typeof t=="function"?t(r):typeof t=="string"?{message:t}:t,c=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...l,fatal:c})}}):At.create(),ol={object:ce.lazycreate};var q;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(q||(q={}));const al=(e,t={message:`Input not instance of ${e.name}`})=>Hs(n=>n instanceof e,t),Ls=Ie.create,Zs=st.create,cl=Bn.create,ll=ot.create,Bs=qt.create,ul=vt.create,dl=Vn.create,fl=Gt.create,hl=Kt.create,pl=At.create,gl=pt.create,ml=Fe.create,yl=Hn.create,vl=Re.create,xl=ce.create,wl=ce.strictCreate,_l=Qt.create,bl=sr.create,Sl=Jt.create,kl=Le.create,El=en.create,Nl=Ln.create,Tl=xt.create,Cl=Tt.create,Ml=tn.create,Al=nn.create,Il=at.create,$l=rn.create,Rl=It.create,Ci=ze.create,zl=je.create,Pl=wt.create,Dl=ze.createWithPreprocess,Ol=pn.create,Vl=()=>Ls().optional(),Hl=()=>Zs().optional(),Ll=()=>Bs().optional(),Zl={string:e=>Ie.create({...e,coerce:!0}),number:e=>st.create({...e,coerce:!0}),boolean:e=>qt.create({...e,coerce:!0}),bigint:e=>ot.create({...e,coerce:!0}),date:e=>vt.create({...e,coerce:!0})},Bl=K;var h=Object.freeze({__proto__:null,defaultErrorMap:Ft,setErrorMap:Uc,getErrorMap:Pn,makeIssue:Dn,EMPTY_PATH:Fc,addIssueToContext:Y,ParseStatus:we,INVALID:K,DIRTY:Ds,OK:_e,isAborted:Dr,isDirty:Or,isValid:Wt,isAsync:On,get util(){return ie},get objectUtil(){return Pr},ZodParsedType:X,getParsedType:nt,ZodType:te,ZodString:Ie,ZodNumber:st,ZodBigInt:ot,ZodBoolean:qt,ZodDate:vt,ZodSymbol:Vn,ZodUndefined:Gt,ZodNull:Kt,ZodAny:At,ZodUnknown:pt,ZodNever:Fe,ZodVoid:Hn,ZodArray:Re,ZodObject:ce,ZodUnion:Qt,ZodDiscriminatedUnion:sr,ZodIntersection:Jt,ZodTuple:Le,ZodRecord:en,ZodMap:Ln,ZodSet:xt,ZodFunction:Tt,ZodLazy:tn,ZodLiteral:nn,ZodEnum:at,ZodNativeEnum:rn,ZodPromise:It,ZodEffects:ze,ZodTransformer:ze,ZodOptional:je,ZodNullable:wt,ZodDefault:sn,ZodCatch:Zn,ZodNaN:Bn,BRAND:sl,ZodBranded:Vs,ZodPipeline:pn,ZodReadonly:Xn,custom:Hs,Schema:te,ZodSchema:te,late:ol,get ZodFirstPartyTypeKind(){return q},coerce:Zl,any:pl,array:vl,bigint:ll,boolean:Bs,date:ul,discriminatedUnion:bl,effect:Ci,enum:Il,function:Cl,instanceof:al,intersection:Sl,lazy:Ml,literal:Al,map:Nl,nan:cl,nativeEnum:$l,never:ml,null:hl,nullable:Pl,number:Zs,object:xl,oboolean:Ll,onumber:Hl,optional:zl,ostring:Vl,pipeline:Ol,preprocess:Dl,promise:Rl,record:El,set:Tl,strictObject:wl,string:Ls,symbol:dl,transformer:Ci,tuple:kl,undefined:fl,union:_l,unknown:gl,void:yl,NEVER:Bl,ZodIssueCode:O,quotelessJson:jc,ZodError:$e}),Mi=h.union([h.string(),h.number(),h.boolean(),h.array(h.string()),h.array(h.boolean()),h.array(h.number())]),Xl=h.record(h.union([Mi,h.record(Mi)])),Yl=h.object({settingsId:h.string(),name:h.string().optional(),values:Xl}),jl=e=>Yl.extend({values:e}),Ul=h.string().regex(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-_]).{8,}$/,"Password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, one number and one special character");h.object({email:h.string().email(),password:Ul});var Fl=h.object({accessToken:h.string(),idToken:h.string(),refreshToken:h.string()}),Wl=h.object({type:h.literal("authentication-tokens"),authenticationTokens:Fl}),ql=h.object({type:h.literal("challenge-session"),challengeSession:h.string()});h.union([Wl,ql]);var Gl=h.object({termsAndConditions:h.object({version:h.literal("1.0")})}),Kl=h.object({email:h.string().trim().email(),accepted:Gl,firstName:h.string().trim().min(1).max(255),lastName:h.string().trim().min(1).max(255),organizationName:h.string().trim().min(1).max(255)}),Ql=h.string().regex(/^[a-z0-9]{4}-[a-z0-9]{6}-[a-z0-9]{4}$/),Jl=h.string().regex(/^[a-z0-9]{14}$/),ti=h.union([Ql,Jl]).transform(e=>e.replace(/-/g,""));Kl.extend({accountId:ti,createdAt:h.coerce.date(),updatedAt:h.coerce.date()}).strip();var Xs=h.object({enabled:h.boolean().optional(),origin:h.array(h.string()).optional(),credentials:h.boolean().optional(),allowMethods:h.array(h.string()).optional(),exposeHeaders:h.array(h.string()).optional(),allowHeaders:h.array(h.string()).optional(),maxAge:h.number().optional()});h.union([h.literal("vidos.id"),h.literal("vidos.dev"),h.literal("vidos.local")]);var ni=h.string().regex(/^[a-z0-9-]{5,64}$/,"Must be between 5 and 64 characters long, contain only lowercase letters, numbers, and dashes.").toLowerCase(),eu=h.literal("global"),tu=h.literal("eu"),nu=h.literal("uk"),ru=h.literal("us"),Ys=[eu,tu,nu,ru];Ys.map(e=>e.value);var ri=h.union([...Ys]),iu=h.literal("iam"),su=h.literal("resolver"),js=[iu,su];js.map(e=>e.value);var or=h.union([...js]),ou=h.literal("create"),au=h.literal("read"),cu=h.literal("update"),lu=h.literal("delete"),uu=h.literal("list"),Us=[ou,au,cu,lu,uu];Us.map(e=>e.value);var ar=h.union(Us),ii=h.union([h.literal("add"),h.literal("remove")]),du=h.union([ar,ii]),fu=h.union([ar,ii,h.literal("read-status"),h.literal("update-status")]),hu=h.union([ar,h.literal("resolve-did"),h.literal("list-methods")]),pu=h.literal("*"),gu=h.union([pu,ar,ii,hu,fu,du]),Fs=h.string().regex(/[a-f0-9]{32}$/).toLowerCase(),Ws=ni,qs=h.enum(["CUSTOMER","MANAGED"]);h.object({service:h.literal("iam").default("iam"),resourceType:h.literal("api-key-policy").default("api-key-policy"),apiKeyId:Fs,policyType:qs,policyId:Ws,createdAt:h.coerce.date(),updatedAt:h.coerce.date()}).strip();var Gs=h.string().min(1),Ks=h.literal("user"),Qs=h.literal("policy"),Js=h.literal("api-key");Ks.value;Qs.value;Js.value;var eo=[Ks,Qs,Js];h.union([...eo]);var mu=h.literal("instance"),yu=h.literal("settings"),to=[mu,yu];h.union([...to]);var no=[...eo,...to],cr=h.union([...no]);no.map(e=>e.value);var dt=h.literal("*");h.union([or,dt]);h.union([cr,dt]);h.union([Gs,dt]);var vu=h.object({region:h.union([ri,dt]),service:h.union([or,dt]),resourceType:h.union([cr,dt]),resourceId:h.union([Gs,dt])}),ro=h.literal("management"),io=h.literal("service");ro.value;io.value;var xu=h.union([ro,io]),wu=h.object({effect:h.union([h.literal("allow"),h.literal("deny")]),scope:xu,actions:h.array(gu).nonempty("Policy permission must have at least one action"),resources:h.array(vu).nonempty("Policy statement must have at least one resource")}).strict().strip(),so=h.object({permissions:h.array(wu).nonempty("Policy must have at least one statement"),version:h.literal("1.0")}).strict().strip(),_u=h.string().regex(/[A-Fa-f0-9]{64}/,"API secret key must be a 64-character hex string"),bu=h.object({service:h.literal("iam").default("iam"),resourceType:h.literal("api-key").default("api-key"),apiKeyId:Fs,name:h.string().optional(),inlinePolicyDocument:so.nullable(),createdAt:h.coerce.date(),updatedAt:h.coerce.date()});bu.extend({apiSecret:_u.optional()});h.object({service:h.literal("iam").default("iam"),resourceType:h.literal("policy").default("policy"),document:so,name:h.string().optional(),description:h.string().optional(),policyId:Ws,createdAt:h.coerce.date(),updatedAt:h.coerce.date(),policyType:qs}).strip();var Su=h.string().regex(/^[a-z0-9-_]+$/).min(1).max(32).toLowerCase();h.object({userId:Su,name:h.string().optional().describe("The name of the user, this is not the user name but rather a display name"),email:h.string().email(),isEmailVerified:h.boolean(),username:h.string(),createdAt:h.coerce.date(),updatedAt:h.coerce.date()}).strip();var ku=h.enum(["STOPPED","RUNNING"]),Eu=h.literal("*"),Nu=h.literal("btcr"),Tu=h.literal("cheqd"),Cu=h.literal("ebsi"),Mu=h.literal("ens"),Au=h.literal("ethr"),Iu=h.literal("ion"),Ai=h.literal("key"),$u=h.literal("oyd"),Ru=h.literal("polygonid"),zu=h.literal("sov"),Pu=h.literal("web"),Du=h.literal("jwk"),Ou=h.literal("plc"),Vu=h.literal("pkh"),oo=[Du,Ou,Nu,Tu,Cu,Mu,Ai,Au,Iu,Ai,$u,Ru,zu,Pu,Vu],Hu=h.union([...oo]),Ii=h.union([Eu,...oo]),si=h.object({enabledMethods:h.array(Ii).optional(),disabledMethods:h.array(Ii).optional(),cors:Xs.optional()});si.extend({cors:Xs.required()}).required();var Lu=ni,Zu=jl(si).extend({service:h.literal("resolver").default("resolver"),resourceType:h.literal("settings").default("settings"),settingsId:Lu}),Bu=ni;h.object({service:h.literal("resolver").default("resolver"),resourceType:h.literal("instance").default("instance"),instanceId:Bu,name:h.string().optional(),settingsIds:h.string().array(),settings:h.array(Zu).optional(),inlineSettings:si.nullable(),status:ku,endpoint:h.string().url(),createdAt:h.coerce.date(),updatedAt:h.coerce.date()}).strip();var $i=h.union([h.string(),h.record(h.union([h.string(),h.record(h.string())]))]),ao=h.union([$i,h.array($i)]),Bt=h.string().superRefine((e,t)=>{e.startsWith("did:")||t.addIssue({code:h.ZodIssueCode.custom,message:'DID must start with "did:"'}),e.split(":").length<=2&&t.addIssue({code:h.ZodIssueCode.custom,message:"DID must have at least 3 parts"})}),gn=h.record(h.any()),Xu=h.object({d:h.string().optional(),r:h.string().optional(),t:h.string().optional()}),Yu=h.object({alg:h.string().optional(),crv:h.string().optional(),d:h.string().optional(),dp:h.string().optional(),dq:h.string().optional(),e:h.string().optional(),ext:h.boolean().optional(),k:h.string().optional(),key_ops:h.array(h.string()).optional(),kty:h.string(),n:h.string().optional(),oth:h.array(Xu).optional(),p:h.string().optional(),q:h.string().optional(),qi:h.string().optional(),use:h.string().optional(),x:h.string().optional(),y:h.string().optional()}),ju=h.object({id:h.string(),type:h.string(),controller:h.string(),publicKeyBase58:h.string().optional(),publicKeyBase64:h.string().optional(),publicKeyJwk:Yu.optional(),publicKeyHex:h.string().optional(),publicKeyMultibase:h.string().optional(),blockchainAccountId:h.string().optional(),ethereumAddress:h.string().optional(),threshold:h.number().optional(),conditionDelegated:h.string().optional(),relationshipParent:h.array(h.string()).optional(),relationshipChild:h.array(h.string()).optional(),relationshipSibling:h.array(h.string()).optional()}),Me=ju.extend({conditionOr:h.lazy(()=>Me.array()).optional(),conditionAnd:h.lazy(()=>Me.array()).optional(),conditionThreshold:h.lazy(()=>Me.array()).optional(),conditionWeightedThreshold:h.lazy(()=>h.object({weight:h.number(),condition:Me}).array()).optional()}).and(gn),Uu=h.object({authentication:h.array(h.union([h.string(),Me])).optional(),assertionMethod:h.array(h.union([h.string(),Me])).optional(),keyAgreement:h.array(h.union([h.string(),Me])).optional(),capabilityInvocation:h.array(h.union([h.string(),Me])).optional(),capabilityDelegation:h.array(h.union([h.string(),Me])).optional()}),Ri=h.string().or(gn),Fu=h.object({id:h.string(),type:h.string(),serviceEndpoint:h.union([Ri,Ri.array()])}).and(gn),Wu=h.object({"@context":ao.or(h.literal("https://www.w3.org/ns/did/v1")).optional(),id:Bt,alsoKnownAs:h.array(Bt).optional(),controller:h.union([Bt,h.array(Bt)]).optional(),verificationMethod:h.array(Me).optional(),service:h.array(Fu).optional(),publicKey:h.array(Me).optional()}).and(Uu),qu=h.object({created:h.string().optional(),updated:h.string().optional(),deactivated:h.boolean().optional(),versionId:h.string().optional(),nextUpdate:h.string().optional(),nextVersionId:h.string().optional(),equivalentId:h.string().optional(),canonicalId:h.string().optional()}).and(gn),Gu=h.object({contentType:h.string().optional(),error:h.union([h.string(),h.literal("invalidDid"),h.literal("notFound"),h.literal("representationNotSupported"),h.literal("invalidDidUrl"),h.literal("methodNotSupported"),h.literal("internalError"),h.literal("invalidPublicKey"),h.literal("invalidPublicKeyLength"),h.literal("invalidPublicKeyType"),h.literal("unsupportedPublicKeyType")]).optional()}).and(gn);h.object({"@context":ao.or(h.literal("https://w3id.org/did-resolution/v1")).optional(),didResolutionMetadata:Gu,didDocument:Wu.nullable(),didDocumentMetadata:qu});h.object({method:Hu,specificationUrl:h.string().url(),issuesUrl:h.string().url().optional(),exampleDistributedIds:h.array(Bt),enabled:h.boolean()});var Ku={btcr:{method:"btcr",specificationUrl:"https://w3c-ccg.github.io/didm-btcr",issuesUrl:"https://github.com/w3c-ccg/didm-btcr/issues/",exampleDistributedIds:["did:btcr:xyv2-xzpq-q9wa-p7t","btcr:xz35-jznz-q6mr-7q6"],enabled:!1},cheqd:{method:"cheqd",specificationUrl:"https://docs.cheqd.io/identity/architecture/adr-list/adr-001-cheqd-did-method",issuesUrl:"https://github.com/cheqd/did-resolver/issues",exampleDistributedIds:["did:cheqd:mainnet:Ps1ysXP2Ae6GBfxNhNQNKN","did:cheqd:Ps1ysXP2Ae6GBfxNhNQNKN","did:cheqd:mainnet:TAwT8WVt3dz2DBAifwuSkn","did:cheqd:TAwT8WVt3dz2DBAifwuSkn","did:cheqd:mainnet:de9786cd-ec53-458c-857c-9342cf264f80","did:cheqd:de9786cd-ec53-458c-857c-9342cf264f80"],enabled:!0},ebsi:{method:"ebsi",specificationUrl:"https://hub.ebsi.eu/vc-framework/did/legal-entities",exampleDistributedIds:["did:ebsi:zvHWX359A3CvfJnCYaAiAde","did:ebsi:zxA9t4Z2uorEVnx9njWUYvR","did:ebsi:z25ZZFS7FweHsm9MX2Qvc6gc"],enabled:!0},ens:{method:"ens",specificationUrl:"https://github.com/veramolabs/did-ens-spec",issuesUrl:"https://github.com/veramolabs/did-ens-spec/issues",exampleDistributedIds:["did:ens:vitalik.eth"],enabled:!0},ethr:{method:"ethr",specificationUrl:"https://github.com/decentralized-identity/ethr-did-resolver/blob/master/doc/did-method-spec.md",issuesUrl:"https://github.com/decentralized-identity/ethr-did-resolver/issues",exampleDistributedIds:["did:ethr:mainnet:0xb9c5714089478a327f09197987f16f9e5d936e8a","did:ethr:0x1:0xb9c5714089478a327f09197987f16f9e5d936e8a","did:ethr:0xb9c5714089478a327f09197987f16f9e5d936e8a"],enabled:!0},ion:{method:"ion",specificationUrl:"https://github.com/decentralized-identity/ion/tree/v1.0.0",issuesUrl:"https://github.com/decentralized-identity/ion/issues",exampleDistributedIds:["did:ion:EiClkZMDxPKqC9c-umQfTkR8vvZ9JPhl_xLDI9Nfk38w5w"],enabled:!0},jwk:{method:"jwk",specificationUrl:"https://github.com/quartzjer/did-jwk/blob/main/spec.md",issuesUrl:"",exampleDistributedIds:["did:jwk:eyJjcnYiOiJQLTI1NiIsImt0eSI6IkVDIiwieCI6ImFjYklRaXVNczNpOF91c3pFakoydHBUdFJNNEVVM3l6OTFQSDZDZEgyVjAiLCJ5IjoiX0tjeUxqOXZXTXB0bm1LdG00NkdxRHo4d2Y3NEk1TEtncmwyR3pIM25TRSJ9","did:jwk:eyJraWQiOiJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6andrLXRodW1icHJpbnQ6c2hhLTI1NjpGZk1iek9qTW1RNGVmVDZrdndUSUpqZWxUcWpsMHhqRUlXUTJxb2JzUk1NIiwia3R5IjoiT0tQIiwiY3J2IjoiRWQyNTUxOSIsImFsZyI6IkVkRFNBIiwieCI6IkFOUmpIX3p4Y0tCeHNqUlBVdHpSYnA3RlNWTEtKWFE5QVBYOU1QMWo3azQifQ"],enabled:!0},key:{method:"key",specificationUrl:"https://w3c-ccg.github.io/did-method-key/",issuesUrl:"",exampleDistributedIds:["did:key:z6MkhaXgBZDvotDkL5257faiztiGiC2QtKLGpbnnEGta2doK","did:key:z6MkiTBz1ymuepAQ4HEHYSF1H8quG5GLVVQR3djdX3mDooWp#z6MkiTBz1ymuepAQ4HEHYSF1H8quG5GLVVQR3djdX3mDooWp"],enabled:!1},oyd:{method:"oyd",specificationUrl:"https://ownyourdata.github.io/oydid/",issuesUrl:"https://github.com/OwnYourData/oydid/issues",exampleDistributedIds:["did:oyd:zQmaBZTghndXTgxNwfbdpVLWdFf6faYE4oeuN2zzXdQt1kh","did:oyd:zQmdXNRiMWEYTiYF58a9BaiUkfB2xWUgL7G7ozyCCNPqjKV","did:oyd:zQmeArtmfxJ1JB6CXvoFdcQCyxPcYii5DUTBR44g4xYpCLR"],enabled:!0},plc:{method:"plc",specificationUrl:"https://github.com/bluesky-social/did-method-plc/blob/main/README.md",issuesUrl:"https://github.com/did-method-plc/did-method-plc/issues",exampleDistributedIds:["did:plc:yk4dd2qkboz2yv6tpubpc6co"],enabled:!0},polygonid:{method:"polygonid",specificationUrl:"https://github.com/0xPolygonID/did-polygonid/blob/main/did-polygonid-method.md",issuesUrl:"https://github.com/0xPolygonID/did-polygonid/issues",exampleDistributedIds:["did:polygonid:polygon:mumbai:2qL4AhwQThPWJ8QH9mxH41CDgKj9chrHN92azh5wkx"],enabled:!0},sov:{method:"sov",specificationUrl:"https://sovrin.org/did-method-spec/",issuesUrl:"https://sovrin-foundation.github.io/sovrin/spec/did-method-spec-template.html",exampleDistributedIds:["did:sov:WRfXPg8dantKVubE3HX8pw","did:sov:stn:WRfXPg8dantKVubE3HX8pw"],enabled:!1},web:{method:"web",specificationUrl:"https://w3c-ccg.github.io/did-method-web/",issuesUrl:"https://github.com/decentralized-identity/web-did-resolver/issues",exampleDistributedIds:["did:web:did.actor","did:web:did.actor:alice"],enabled:!0},pkh:{method:"web",specificationUrl:"https://github.com/w3c-ccg/did-pkh/blob/main/did-pkh-method-draft.md/",issuesUrl:"https://github.com/w3c-ccg/did-pkh/issues",exampleDistributedIds:["did:pkh:tezos:NetXdQprcVkpaWU:tz1TzrmTBSuiVHV2VfMnGRMYvTEPCP42oSM8","did:pkh:bip122:000000000019d6689c085ae165831e93:128Lkh3S7CkDTBZ8W7BbpsN3YYizJMp8p6"],enabled:!0}},Qu=Object.entries(Ku).filter(([e,t])=>t.enabled).map(([e,t])=>e),oi=h.object({accountId:ti,region:ri,service:or,resourceType:cr,resourceId:h.string()}),co=h.string().transform(e=>{const[t,n,r,i,s,o,a,c]=e.split(":");return oi.extend({prefix:h.literal("did"),method:h.literal("vidos"),partition:h.literal("vrn")}).parse({prefix:t,method:n,partition:r,accountId:i,region:s,service:o,resourceType:a,resourceId:c})}).transform(e=>{const{accountId:t,region:n,service:r,resourceType:i,resourceId:s}=e;return`did:vidos:vrn:${ti.parse(t)}:${ri.parse(n)}:${or.parse(r)}:${cr.parse(i)}:${s}`});co.transform(e=>{const[t,n,r,i,s,o,a,c]=e.split(":");if(!t||!n||!r||!i||!s||!o||!a||!c)throw new Error("Invalid resource name format");if(t!=="did")throw new Error(`Invalid resource name prefix: ${t}`);if(n!=="vidos")throw new Error(`Invalid resource name method: ${n}`);if(r!=="vrn")throw new Error(`Invalid resource name partition: ${r}`);return oi.parse({accountId:i,region:s,service:o,resourceType:a,resourceId:c})});oi.transform(e=>{const{accountId:t,region:n,service:r,resourceType:i,resourceId:s}=e;return`did:vidos:vrn:${t}:${n}:${r}:${i}:${s}`}).pipe(co);function pe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=pe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Ju={value:()=>{}};function lr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new In(n)}function In(e){this._=e}function ed(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}In.prototype=lr.prototype={constructor:In,on:function(e,t){var n=this._,r=ed(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=td(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=zi(n[i],e.name,t);else if(t==null)for(i in n)n[i]=zi(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new In(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function td(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function zi(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ju,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Hr="http://www.w3.org/1999/xhtml";const Pi={svg:"http://www.w3.org/2000/svg",xhtml:Hr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ur(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Pi.hasOwnProperty(t)?{space:Pi[t],local:e}:e}function nd(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Hr&&t.documentElement.namespaceURI===Hr?t.createElement(e):t.createElementNS(n,e)}}function rd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function lo(e){var t=ur(e);return(t.local?rd:nd)(t)}function id(){}function ai(e){return e==null?id:function(){return this.querySelector(e)}}function sd(e){typeof e!="function"&&(e=ai(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),c,l,u=0;u<o;++u)(c=s[u])&&(l=e.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new Ne(r,this._parents)}function od(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ad(){return[]}function uo(e){return e==null?ad:function(){return this.querySelectorAll(e)}}function cd(e){return function(){return od(e.apply(this,arguments))}}function ld(e){typeof e=="function"?e=cd(e):e=uo(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new Ne(r,i)}function fo(e){return function(){return this.matches(e)}}function ho(e){return function(t){return t.matches(e)}}var ud=Array.prototype.find;function dd(e){return function(){return ud.call(this.children,e)}}function fd(){return this.firstElementChild}function hd(e){return this.select(e==null?fd:dd(typeof e=="function"?e:ho(e)))}var pd=Array.prototype.filter;function gd(){return Array.from(this.children)}function md(e){return function(){return pd.call(this.children,e)}}function yd(e){return this.selectAll(e==null?gd:md(typeof e=="function"?e:ho(e)))}function vd(e){typeof e!="function"&&(e=fo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new Ne(r,this._parents)}function po(e){return new Array(e.length)}function xd(){return new Ne(this._enter||this._groups.map(po),this._parents)}function Yn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Yn.prototype={constructor:Yn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function wd(e){return function(){return e}}function _d(e,t,n,r,i,s){for(var o=0,a,c=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new Yn(e,s[o]);for(;o<c;++o)(a=t[o])&&(i[o]=a)}function bd(e,t,n,r,i,s,o){var a,c,l=new Map,u=t.length,d=s.length,f=new Array(u),g;for(a=0;a<u;++a)(c=t[a])&&(f[a]=g=o.call(c,c.__data__,a,t)+"",l.has(g)?i[a]=c:l.set(g,c));for(a=0;a<d;++a)g=o.call(e,s[a],a,s)+"",(c=l.get(g))?(r[a]=c,c.__data__=s[a],l.delete(g)):n[a]=new Yn(e,s[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(f[a])===c&&(i[a]=c)}function Sd(e){return e.__data__}function kd(e,t){if(!arguments.length)return Array.from(this,Sd);var n=t?bd:_d,r=this._parents,i=this._groups;typeof e!="function"&&(e=wd(e));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=r[l],d=i[l],f=d.length,g=Ed(e.call(u,u&&u.__data__,l,r)),y=g.length,b=a[l]=new Array(y),k=o[l]=new Array(y),x=c[l]=new Array(f);n(u,d,b,k,x,g,t);for(var v=0,C=0,m,w;v<y;++v)if(m=b[v]){for(v>=C&&(C=v+1);!(w=k[C])&&++C<y;);m._next=w||null}}return o=new Ne(o,r),o._enter=a,o._exit=c,o}function Ed(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Nd(){return new Ne(this._exit||this._groups.map(po),this._parents)}function Td(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Cd(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],d=l.length,f=a[c]=new Array(d),g,y=0;y<d;++y)(g=l[y]||u[y])&&(f[y]=g);for(;c<i;++c)a[c]=n[c];return new Ne(a,this._parents)}function Md(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Ad(e){e||(e=Id);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,c=i[s]=new Array(a),l,u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new Ne(i,this._parents).order()}function Id(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $d(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Rd(){return Array.from(this)}function zd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Pd(){let e=0;for(const t of this)++e;return e}function Dd(){return!this.node()}function Od(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Vd(e){return function(){this.removeAttribute(e)}}function Hd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ld(e,t){return function(){this.setAttribute(e,t)}}function Zd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Bd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Xd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Yd(e,t){var n=ur(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Hd:Vd:typeof t=="function"?n.local?Xd:Bd:n.local?Zd:Ld)(n,t))}function go(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function jd(e){return function(){this.style.removeProperty(e)}}function Ud(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Fd(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Wd(e,t,n){return arguments.length>1?this.each((t==null?jd:typeof t=="function"?Fd:Ud)(e,t,n??"")):$t(this.node(),e)}function $t(e,t){return e.style.getPropertyValue(t)||go(e).getComputedStyle(e,null).getPropertyValue(t)}function qd(e){return function(){delete this[e]}}function Gd(e,t){return function(){this[e]=t}}function Kd(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Qd(e,t){return arguments.length>1?this.each((t==null?qd:typeof t=="function"?Kd:Gd)(e,t)):this.node()[e]}function mo(e){return e.trim().split(/^|\s+/)}function ci(e){return e.classList||new yo(e)}function yo(e){this._node=e,this._names=mo(e.getAttribute("class")||"")}yo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function vo(e,t){for(var n=ci(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function xo(e,t){for(var n=ci(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Jd(e){return function(){vo(this,e)}}function ef(e){return function(){xo(this,e)}}function tf(e,t){return function(){(t.apply(this,arguments)?vo:xo)(this,e)}}function nf(e,t){var n=mo(e+"");if(arguments.length<2){for(var r=ci(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?tf:t?Jd:ef)(n,t))}function rf(){this.textContent=""}function sf(e){return function(){this.textContent=e}}function of(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function af(e){return arguments.length?this.each(e==null?rf:(typeof e=="function"?of:sf)(e)):this.node().textContent}function cf(){this.innerHTML=""}function lf(e){return function(){this.innerHTML=e}}function uf(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function df(e){return arguments.length?this.each(e==null?cf:(typeof e=="function"?uf:lf)(e)):this.node().innerHTML}function ff(){this.nextSibling&&this.parentNode.appendChild(this)}function hf(){return this.each(ff)}function pf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gf(){return this.each(pf)}function mf(e){var t=typeof e=="function"?e:lo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function yf(){return null}function vf(e,t){var n=typeof e=="function"?e:lo(e),r=t==null?yf:typeof t=="function"?t:ai(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xf(){var e=this.parentNode;e&&e.removeChild(this)}function wf(){return this.each(xf)}function _f(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sf(e){return this.select(e?bf:_f)}function kf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ef(e){return function(t){e.call(this,t,this.__data__)}}function Nf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Tf(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Cf(e,t,n){return function(){var r=this.__on,i,s=Ef(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Mf(e,t,n){var r=Nf(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?Cf:Tf,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function wo(e,t,n){var r=go(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Af(e,t){return function(){return wo(this,e,t)}}function If(e,t){return function(){return wo(this,e,t.apply(this,arguments))}}function $f(e,t){return this.each((typeof t=="function"?If:Af)(e,t))}function*Rf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var _o=[null];function Ne(e,t){this._groups=e,this._parents=t}function mn(){return new Ne([[document.documentElement]],_o)}function zf(){return this}Ne.prototype=mn.prototype={constructor:Ne,select:sd,selectAll:ld,selectChild:hd,selectChildren:yd,filter:vd,data:kd,enter:xd,exit:Nd,join:Td,merge:Cd,selection:zf,order:Md,sort:Ad,call:$d,nodes:Rd,node:zd,size:Pd,empty:Dd,each:Od,attr:Yd,style:Wd,property:Qd,classed:nf,text:af,html:df,raise:hf,lower:gf,append:mf,insert:vf,remove:wf,clone:Sf,datum:kf,on:Mf,dispatch:$f,[Symbol.iterator]:Rf};function Ee(e){return typeof e=="string"?new Ne([[document.querySelector(e)]],[document.documentElement]):new Ne([[e]],_o)}function Pf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ce(e,t){if(e=Pf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Df={passive:!1},on={capture:!0,passive:!1};function Sr(e){e.stopImmediatePropagation()}function Ct(e){e.preventDefault(),e.stopImmediatePropagation()}function bo(e){var t=e.document.documentElement,n=Ee(e).on("dragstart.drag",Ct,on);"onselectstart"in t?n.on("selectstart.drag",Ct,on):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function So(e,t){var n=e.document.documentElement,r=Ee(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ct,on),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const wn=e=>()=>e;function Lr(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Lr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Of(e){return!e.ctrlKey&&!e.button}function Vf(){return this.parentNode}function Hf(e,t){return t??{x:e.x,y:e.y}}function Lf(){return navigator.maxTouchPoints||"ontouchstart"in this}function ko(){var e=Of,t=Vf,n=Hf,r=Lf,i={},s=lr("start","drag","end"),o=0,a,c,l,u,d=0;function f(m){m.on("mousedown.drag",g).filter(r).on("touchstart.drag",k).on("touchmove.drag",x,Df).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(m,w){if(!(u||!e.call(this,m,w))){var E=C(this,t.call(this,m,w),m,w,"mouse");E&&(Ee(m.view).on("mousemove.drag",y,on).on("mouseup.drag",b,on),bo(m.view),Sr(m),l=!1,a=m.clientX,c=m.clientY,E("start",m))}}function y(m){if(Ct(m),!l){var w=m.clientX-a,E=m.clientY-c;l=w*w+E*E>d}i.mouse("drag",m)}function b(m){Ee(m.view).on("mousemove.drag mouseup.drag",null),So(m.view,l),Ct(m),i.mouse("end",m)}function k(m,w){if(e.call(this,m,w)){var E=m.changedTouches,N=t.call(this,m,w),I=E.length,D,T;for(D=0;D<I;++D)(T=C(this,N,m,w,E[D].identifier,E[D]))&&(Sr(m),T("start",m,E[D]))}}function x(m){var w=m.changedTouches,E=w.length,N,I;for(N=0;N<E;++N)(I=i[w[N].identifier])&&(Ct(m),I("drag",m,w[N]))}function v(m){var w=m.changedTouches,E=w.length,N,I;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),N=0;N<E;++N)(I=i[w[N].identifier])&&(Sr(m),I("end",m,w[N]))}function C(m,w,E,N,I,D){var T=s.copy(),R=Ce(D||E,w),A,S,p;if((p=n.call(m,new Lr("beforestart",{sourceEvent:E,target:f,identifier:I,active:o,x:R[0],y:R[1],dx:0,dy:0,dispatch:T}),N))!=null)return A=p.x-R[0]||0,S=p.y-R[1]||0,function M(_,$,P){var L=R,V;switch(_){case"start":i[I]=M,V=o++;break;case"end":delete i[I],--o;case"drag":R=Ce(P||$,w),V=o;break}T.call(_,m,new Lr(_,{sourceEvent:$,subject:p,target:f,identifier:I,active:V,x:R[0]+A,y:R[1]+S,dx:R[0]-L[0],dy:R[1]-L[1],dispatch:T}),N)}}return f.filter=function(m){return arguments.length?(e=typeof m=="function"?m:wn(!!m),f):e},f.container=function(m){return arguments.length?(t=typeof m=="function"?m:wn(m),f):t},f.subject=function(m){return arguments.length?(n=typeof m=="function"?m:wn(m),f):n},f.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:wn(!!m),f):r},f.on=function(){var m=s.on.apply(s,arguments);return m===s?f:m},f.clickDistance=function(m){return arguments.length?(d=(m=+m)*m,f):Math.sqrt(d)},f}function li(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Eo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function yn(){}var an=.7,jn=1/an,Mt="\\s*([+-]?\\d+)\\s*",cn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zf=/^#([0-9a-f]{3,8})$/,Bf=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),Xf=new RegExp(`^rgb\\(${Oe},${Oe},${Oe}\\)$`),Yf=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${cn}\\)$`),jf=new RegExp(`^rgba\\(${Oe},${Oe},${Oe},${cn}\\)$`),Uf=new RegExp(`^hsl\\(${cn},${Oe},${Oe}\\)$`),Ff=new RegExp(`^hsla\\(${cn},${Oe},${Oe},${cn}\\)$`),Di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};li(yn,ln,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Oi,formatHex:Oi,formatHex8:Wf,formatHsl:qf,formatRgb:Vi,toString:Vi});function Oi(){return this.rgb().formatHex()}function Wf(){return this.rgb().formatHex8()}function qf(){return No(this).formatHsl()}function Vi(){return this.rgb().formatRgb()}function ln(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Zf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Hi(t):n===3?new ke(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_n(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_n(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Bf.exec(e))?new ke(t[1],t[2],t[3],1):(t=Xf.exec(e))?new ke(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Yf.exec(e))?_n(t[1],t[2],t[3],t[4]):(t=jf.exec(e))?_n(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Uf.exec(e))?Bi(t[1],t[2]/100,t[3]/100,1):(t=Ff.exec(e))?Bi(t[1],t[2]/100,t[3]/100,t[4]):Di.hasOwnProperty(e)?Hi(Di[e]):e==="transparent"?new ke(NaN,NaN,NaN,0):null}function Hi(e){return new ke(e>>16&255,e>>8&255,e&255,1)}function _n(e,t,n,r){return r<=0&&(e=t=n=NaN),new ke(e,t,n,r)}function Gf(e){return e instanceof yn||(e=ln(e)),e?(e=e.rgb(),new ke(e.r,e.g,e.b,e.opacity)):new ke}function Zr(e,t,n,r){return arguments.length===1?Gf(e):new ke(e,t,n,r??1)}function ke(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}li(ke,Zr,Eo(yn,{brighter(e){return e=e==null?jn:Math.pow(jn,e),new ke(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?an:Math.pow(an,e),new ke(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ke(gt(this.r),gt(this.g),gt(this.b),Un(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Li,formatHex:Li,formatHex8:Kf,formatRgb:Zi,toString:Zi}));function Li(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}`}function Kf(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}${ft((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zi(){const e=Un(this.opacity);return`${e===1?"rgb(":"rgba("}${gt(this.r)}, ${gt(this.g)}, ${gt(this.b)}${e===1?")":`, ${e})`}`}function Un(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ft(e){return e=gt(e),(e<16?"0":"")+e.toString(16)}function Bi(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ae(e,t,n,r)}function No(e){if(e instanceof Ae)return new Ae(e.h,e.s,e.l,e.opacity);if(e instanceof yn||(e=ln(e)),!e)return new Ae;if(e instanceof Ae)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,c=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new Ae(o,a,c,e.opacity)}function Qf(e,t,n,r){return arguments.length===1?No(e):new Ae(e,t,n,r??1)}function Ae(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}li(Ae,Qf,Eo(yn,{brighter(e){return e=e==null?jn:Math.pow(jn,e),new Ae(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?an:Math.pow(an,e),new Ae(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ke(kr(e>=240?e-240:e+120,i,r),kr(e,i,r),kr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ae(Xi(this.h),bn(this.s),bn(this.l),Un(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Un(this.opacity);return`${e===1?"hsl(":"hsla("}${Xi(this.h)}, ${bn(this.s)*100}%, ${bn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Xi(e){return e=(e||0)%360,e<0?e+360:e}function bn(e){return Math.max(0,Math.min(1,e||0))}function kr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const To=e=>()=>e;function Jf(e,t){return function(n){return e+n*t}}function eh(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function th(e){return(e=+e)==1?Co:function(t,n){return n-t?eh(t,n,e):To(isNaN(t)?n:t)}}function Co(e,t){var n=t-e;return n?Jf(e,n):To(isNaN(e)?t:e)}const Yi=function e(t){var n=th(t);function r(i,s){var o=n((i=Zr(i)).r,(s=Zr(s)).r),a=n(i.g,s.g),c=n(i.b,s.b),l=Co(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Br=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Er=new RegExp(Br.source,"g");function nh(e){return function(){return e}}function rh(e){return function(t){return e(t)+""}}function ih(e,t){var n=Br.lastIndex=Er.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(e=e+"",t=t+"";(r=Br.exec(e))&&(i=Er.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:tt(r,i)})),n=Er.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?rh(c[0].x):nh(t):(t=c.length,function(l){for(var u=0,d;u<t;++u)a[(d=c[u]).i]=d.x(l);return a.join("")})}var ji=180/Math.PI,Xr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Mo(e,t,n,r,i,s){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ji,skewX:Math.atan(c)*ji,scaleX:o,scaleY:a}}var Sn;function sh(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Xr:Mo(t.a,t.b,t.c,t.d,t.e,t.f)}function oh(e){return e==null||(Sn||(Sn=document.createElementNS("http://www.w3.org/2000/svg","g")),Sn.setAttribute("transform",e),!(e=Sn.transform.baseVal.consolidate()))?Xr:(e=e.matrix,Mo(e.a,e.b,e.c,e.d,e.e,e.f))}function Ao(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,u,d,f,g,y){if(l!==d||u!==f){var b=g.push("translate(",null,t,null,n);y.push({i:b-4,x:tt(l,d)},{i:b-2,x:tt(u,f)})}else(d||f)&&g.push("translate("+d+t+f+n)}function o(l,u,d,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:tt(l,u)})):u&&d.push(i(d)+"rotate("+u+r)}function a(l,u,d,f){l!==u?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:tt(l,u)}):u&&d.push(i(d)+"skewX("+u+r)}function c(l,u,d,f,g,y){if(l!==d||u!==f){var b=g.push(i(g)+"scale(",null,",",null,")");y.push({i:b-4,x:tt(l,d)},{i:b-2,x:tt(u,f)})}else(d!==1||f!==1)&&g.push(i(g)+"scale("+d+","+f+")")}return function(l,u){var d=[],f=[];return l=e(l),u=e(u),s(l.translateX,l.translateY,u.translateX,u.translateY,d,f),o(l.rotate,u.rotate,d,f),a(l.skewX,u.skewX,d,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,f),l=u=null,function(g){for(var y=-1,b=f.length,k;++y<b;)d[(k=f[y]).i]=k.x(g);return d.join("")}}}var ah=Ao(sh,"px, ","px)","deg)"),ch=Ao(oh,", ",")",")"),lh=1e-12;function Ui(e){return((e=Math.exp(e))+1/e)/2}function uh(e){return((e=Math.exp(e))-1/e)/2}function dh(e){return((e=Math.exp(2*e))-1)/(e+1)}const fh=function e(t,n,r){function i(s,o){var a=s[0],c=s[1],l=s[2],u=o[0],d=o[1],f=o[2],g=u-a,y=d-c,b=g*g+y*y,k,x;if(b<lh)x=Math.log(f/l)/t,k=function(N){return[a+N*g,c+N*y,l*Math.exp(t*N*x)]};else{var v=Math.sqrt(b),C=(f*f-l*l+r*b)/(2*l*n*v),m=(f*f-l*l-r*b)/(2*f*n*v),w=Math.log(Math.sqrt(C*C+1)-C),E=Math.log(Math.sqrt(m*m+1)-m);x=(E-w)/t,k=function(N){var I=N*x,D=Ui(w),T=l/(n*v)*(D*dh(t*I+w)-uh(w));return[a+T*g,c+T*y,l*D/Ui(t*I+w)]}}return k.duration=x*1e3*t/Math.SQRT2,k}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,c=a*a;return e(o,a,c)},i}(Math.SQRT2,2,4);var Rt=0,Xt=0,Lt=0,Io=1e3,Fn,Yt,Wn=0,_t=0,dr=0,un=typeof performance=="object"&&performance.now?performance:Date,$o=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ui(){return _t||($o(hh),_t=un.now()+dr)}function hh(){_t=0}function qn(){this._call=this._time=this._next=null}qn.prototype=Ro.prototype={constructor:qn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ui():+n)+(t==null?0:+t),!this._next&&Yt!==this&&(Yt?Yt._next=this:Fn=this,Yt=this),this._call=e,this._time=n,Yr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yr())}};function Ro(e,t,n){var r=new qn;return r.restart(e,t,n),r}function ph(){ui(),++Rt;for(var e=Fn,t;e;)(t=_t-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Rt}function Fi(){_t=(Wn=un.now())+dr,Rt=Xt=0;try{ph()}finally{Rt=0,mh(),_t=0}}function gh(){var e=un.now(),t=e-Wn;t>Io&&(dr-=t,Wn=e)}function mh(){for(var e,t=Fn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Fn=n);Yt=e,Yr(r)}function Yr(e){if(!Rt){Xt&&(Xt=clearTimeout(Xt));var t=e-_t;t>24?(e<1/0&&(Xt=setTimeout(Fi,e-un.now()-dr)),Lt&&(Lt=clearInterval(Lt))):(Lt||(Wn=un.now(),Lt=setInterval(gh,Io)),Rt=1,$o(Fi))}}function Wi(e,t,n){var r=new qn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var yh=lr("start","end","cancel","interrupt"),vh=[],zo=0,qi=1,jr=2,$n=3,Gi=4,Ur=5,Rn=6;function fr(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;xh(e,n,{name:t,index:r,group:i,on:yh,tween:vh,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:zo})}function di(e,t){var n=Pe(e,t);if(n.state>zo)throw new Error("too late; already scheduled");return n}function Ze(e,t){var n=Pe(e,t);if(n.state>$n)throw new Error("too late; already running");return n}function Pe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function xh(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ro(s,0,n.time);function s(l){n.state=qi,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var u,d,f,g;if(n.state!==qi)return c();for(u in r)if(g=r[u],g.name===n.name){if(g.state===$n)return Wi(o);g.state===Gi?(g.state=Rn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[u]):+u<t&&(g.state=Rn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[u])}if(Wi(function(){n.state===$n&&(n.state=Gi,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=jr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===jr){for(n.state=$n,i=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(g=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=g);i.length=d+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Ur,1),d=-1,f=i.length;++d<f;)i[d].call(e,u);n.state===Ur&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Rn,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function zn(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>jr&&r.state<Ur,r.state=Rn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function wh(e){return this.each(function(){zn(this,e)})}function _h(e,t){var n,r;return function(){var i=Ze(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function bh(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ze(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=a;break}c===l&&i.push(a)}s.tween=i}}function Sh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Pe(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?_h:bh)(n,e,t))}function fi(e,t,n){var r=e._id;return e.each(function(){var i=Ze(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Pe(i,r).value[t]}}function Po(e,t){var n;return(typeof t=="number"?tt:t instanceof ln?Yi:(n=ln(t))?(t=n,Yi):ih)(e,t)}function kh(e){return function(){this.removeAttribute(e)}}function Eh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Nh(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Th(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Ch(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function Mh(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function Ah(e,t){var n=ur(e),r=n==="transform"?ch:Po;return this.attrTween(e,typeof t=="function"?(n.local?Mh:Ch)(n,r,fi(this,"attr."+e,t)):t==null?(n.local?Eh:kh)(n):(n.local?Th:Nh)(n,r,t))}function Ih(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function $h(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Rh(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&$h(e,s)),n}return i._value=t,i}function zh(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Ih(e,s)),n}return i._value=t,i}function Ph(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ur(e);return this.tween(n,(r.local?Rh:zh)(r,t))}function Dh(e,t){return function(){di(this,e).delay=+t.apply(this,arguments)}}function Oh(e,t){return t=+t,function(){di(this,e).delay=t}}function Vh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Dh:Oh)(t,e)):Pe(this.node(),t).delay}function Hh(e,t){return function(){Ze(this,e).duration=+t.apply(this,arguments)}}function Lh(e,t){return t=+t,function(){Ze(this,e).duration=t}}function Zh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Hh:Lh)(t,e)):Pe(this.node(),t).duration}function Bh(e,t){if(typeof t!="function")throw new Error;return function(){Ze(this,e).ease=t}}function Xh(e){var t=this._id;return arguments.length?this.each(Bh(t,e)):Pe(this.node(),t).ease}function Yh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ze(this,e).ease=n}}function jh(e){if(typeof e!="function")throw new Error;return this.each(Yh(this._id,e))}function Uh(e){typeof e!="function"&&(e=fo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new We(r,this._parents,this._name,this._id)}function Fh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var c=t[a],l=n[a],u=c.length,d=o[a]=new Array(u),f,g=0;g<u;++g)(f=c[g]||l[g])&&(d[g]=f);for(;a<r;++a)o[a]=t[a];return new We(o,this._parents,this._name,this._id)}function Wh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function qh(e,t,n){var r,i,s=Wh(t)?di:Ze;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Gh(e,t){var n=this._id;return arguments.length<2?Pe(this.node(),n).on.on(e):this.each(qh(n,e,t))}function Kh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Qh(){return this.on("end.remove",Kh(this._id))}function Jh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ai(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],c=a.length,l=s[o]=new Array(c),u,d,f=0;f<c;++f)(u=a[f])&&(d=e.call(u,u.__data__,f,a))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d,fr(l[f],t,n,f,l,Pe(u,n)));return new We(s,this._parents,t,n)}function ep(e){var t=this._name,n=this._id;typeof e!="function"&&(e=uo(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),g,y=Pe(u,n),b=0,k=f.length;b<k;++b)(g=f[b])&&fr(g,t,n,b,f,y);s.push(f),o.push(u)}return new We(s,o,t,n)}var tp=mn.prototype.constructor;function np(){return new tp(this._groups,this._parents)}function rp(e,t){var n,r,i;return function(){var s=$t(this,e),o=(this.style.removeProperty(e),$t(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Do(e){return function(){this.style.removeProperty(e)}}function ip(e,t,n){var r,i=n+"",s;return function(){var o=$t(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function sp(e,t,n){var r,i,s;return function(){var o=$t(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),$t(this,e))),o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a))}}function op(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var c=Ze(this,e),l=c.on,u=c.value[s]==null?a||(a=Do(t)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function ap(e,t,n){var r=(e+="")=="transform"?ah:Po;return t==null?this.styleTween(e,rp(e,r)).on("end.style."+e,Do(e)):typeof t=="function"?this.styleTween(e,sp(e,r,fi(this,"style."+e,t))).each(op(this._id,e)):this.styleTween(e,ip(e,r,t),n).on("end.style."+e,null)}function cp(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function lp(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&cp(e,o,n)),r}return s._value=t,s}function up(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,lp(e,t,n??""))}function dp(e){return function(){this.textContent=e}}function fp(e){return function(){var t=e(this);this.textContent=t??""}}function hp(e){return this.tween("text",typeof e=="function"?fp(fi(this,"text",e)):dp(e==null?"":e+""))}function pp(e){return function(t){this.textContent=e.call(this,t)}}function gp(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&pp(i)),t}return r._value=e,r}function mp(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,gp(e))}function yp(){for(var e=this._name,t=this._id,n=Oo(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)if(c=o[l]){var u=Pe(c,t);fr(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new We(r,this._parents,e,n)}function vp(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var l=Ze(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),i===0&&s()})}var xp=0;function We(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Oo(){return++xp}var Xe=mn.prototype;We.prototype={constructor:We,select:Jh,selectAll:ep,selectChild:Xe.selectChild,selectChildren:Xe.selectChildren,filter:Uh,merge:Fh,selection:np,transition:yp,call:Xe.call,nodes:Xe.nodes,node:Xe.node,size:Xe.size,empty:Xe.empty,each:Xe.each,on:Gh,attr:Ah,attrTween:Ph,style:ap,styleTween:up,text:hp,textTween:mp,remove:Qh,tween:Sh,delay:Vh,duration:Zh,ease:Xh,easeVarying:jh,end:vp,[Symbol.iterator]:Xe[Symbol.iterator]};function wp(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _p={time:null,delay:0,duration:250,ease:wp};function bp(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Sp(e){var t,n;e instanceof We?(t=e._id,e=e._name):(t=Oo(),(n=_p).time=ui(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&fr(c,e,t,l,o,n||bp(c,t));return new We(r,this._parents,e,t)}mn.prototype.interrupt=wh;mn.prototype.transition=Sp;const kn=e=>()=>e;function kp(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ye(e,t,n){this.k=e,this.x=t,this.y=n}Ye.prototype={constructor:Ye,scale:function(e){return e===1?this:new Ye(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ye(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var hr=new Ye(1,0,0);Vo.prototype=Ye.prototype;function Vo(e){for(;!e.__zoom;)if(!(e=e.parentNode))return hr;return e.__zoom}function Nr(e){e.stopImmediatePropagation()}function Zt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ep(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Np(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ki(){return this.__zoom||hr}function Tp(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Cp(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mp(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Ho(){var e=Ep,t=Np,n=Mp,r=Tp,i=Cp,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=fh,l=lr("start","zoom","end"),u,d,f,g=500,y=150,b=0,k=10;function x(p){p.property("__zoom",Ki).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",T).filter(i).on("touchstart.zoom",R).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(p,M,_,$){var P=p.selection?p.selection():p;P.property("__zoom",Ki),p!==P?w(p,M,_,$):P.interrupt().each(function(){E(this,arguments).event($).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},x.scaleBy=function(p,M,_,$){x.scaleTo(p,function(){var P=this.__zoom.k,L=typeof M=="function"?M.apply(this,arguments):M;return P*L},_,$)},x.scaleTo=function(p,M,_,$){x.transform(p,function(){var P=t.apply(this,arguments),L=this.__zoom,V=_==null?m(P):typeof _=="function"?_.apply(this,arguments):_,H=L.invert(V),Z=typeof M=="function"?M.apply(this,arguments):M;return n(C(v(L,Z),V,H),P,o)},_,$)},x.translateBy=function(p,M,_,$){x.transform(p,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),o)},null,$)},x.translateTo=function(p,M,_,$,P){x.transform(p,function(){var L=t.apply(this,arguments),V=this.__zoom,H=$==null?m(L):typeof $=="function"?$.apply(this,arguments):$;return n(hr.translate(H[0],H[1]).scale(V.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof _=="function"?-_.apply(this,arguments):-_),L,o)},$,P)};function v(p,M){return M=Math.max(s[0],Math.min(s[1],M)),M===p.k?p:new Ye(M,p.x,p.y)}function C(p,M,_){var $=M[0]-_[0]*p.k,P=M[1]-_[1]*p.k;return $===p.x&&P===p.y?p:new Ye(p.k,$,P)}function m(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function w(p,M,_,$){p.on("start.zoom",function(){E(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event($).end()}).tween("zoom",function(){var P=this,L=arguments,V=E(P,L).event($),H=t.apply(P,L),Z=_==null?m(H):typeof _=="function"?_.apply(P,L):_,j=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),B=P.__zoom,W=typeof M=="function"?M.apply(P,L):M,ne=c(B.invert(Z).concat(j/B.k),W.invert(Z).concat(j/W.k));return function(Q){if(Q===1)Q=W;else{var ee=ne(Q),ae=j/ee[2];Q=new Ye(ae,Z[0]-ee[0]*ae,Z[1]-ee[1]*ae)}V.zoom(null,Q)}})}function E(p,M,_){return!_&&p.__zooming||new N(p,M)}function N(p,M){this.that=p,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(p,M),this.taps=0}N.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,M){return this.mouse&&p!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var M=Ee(this.that).datum();l.call(p,this.that,new kp(p,{sourceEvent:this.sourceEvent,target:x,type:p,transform:this.that.__zoom,dispatch:l}),M)}};function I(p,...M){if(!e.apply(this,arguments))return;var _=E(this,M).event(p),$=this.__zoom,P=Math.max(s[0],Math.min(s[1],$.k*Math.pow(2,r.apply(this,arguments)))),L=Ce(p);if(_.wheel)(_.mouse[0][0]!==L[0]||_.mouse[0][1]!==L[1])&&(_.mouse[1]=$.invert(_.mouse[0]=L)),clearTimeout(_.wheel);else{if($.k===P)return;_.mouse=[L,$.invert(L)],zn(this),_.start()}Zt(p),_.wheel=setTimeout(V,y),_.zoom("mouse",n(C(v($,P),_.mouse[0],_.mouse[1]),_.extent,o));function V(){_.wheel=null,_.end()}}function D(p,...M){if(f||!e.apply(this,arguments))return;var _=p.currentTarget,$=E(this,M,!0).event(p),P=Ee(p.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",j,!0),L=Ce(p,_),V=p.clientX,H=p.clientY;bo(p.view),Nr(p),$.mouse=[L,this.__zoom.invert(L)],zn(this),$.start();function Z(B){if(Zt(B),!$.moved){var W=B.clientX-V,ne=B.clientY-H;$.moved=W*W+ne*ne>b}$.event(B).zoom("mouse",n(C($.that.__zoom,$.mouse[0]=Ce(B,_),$.mouse[1]),$.extent,o))}function j(B){P.on("mousemove.zoom mouseup.zoom",null),So(B.view,$.moved),Zt(B),$.event(B).end()}}function T(p,...M){if(e.apply(this,arguments)){var _=this.__zoom,$=Ce(p.changedTouches?p.changedTouches[0]:p,this),P=_.invert($),L=_.k*(p.shiftKey?.5:2),V=n(C(v(_,L),$,P),t.apply(this,M),o);Zt(p),a>0?Ee(this).transition().duration(a).call(w,V,$,p):Ee(this).call(x.transform,V,$,p)}}function R(p,...M){if(e.apply(this,arguments)){var _=p.touches,$=_.length,P=E(this,M,p.changedTouches.length===$).event(p),L,V,H,Z;for(Nr(p),V=0;V<$;++V)H=_[V],Z=Ce(H,this),Z=[Z,this.__zoom.invert(Z),H.identifier],P.touch0?!P.touch1&&P.touch0[2]!==Z[2]&&(P.touch1=Z,P.taps=0):(P.touch0=Z,L=!0,P.taps=1+!!u);u&&(u=clearTimeout(u)),L&&(P.taps<2&&(d=Z[0],u=setTimeout(function(){u=null},g)),zn(this),P.start())}}function A(p,...M){if(this.__zooming){var _=E(this,M).event(p),$=p.changedTouches,P=$.length,L,V,H,Z;for(Zt(p),L=0;L<P;++L)V=$[L],H=Ce(V,this),_.touch0&&_.touch0[2]===V.identifier?_.touch0[0]=H:_.touch1&&_.touch1[2]===V.identifier&&(_.touch1[0]=H);if(V=_.that.__zoom,_.touch1){var j=_.touch0[0],B=_.touch0[1],W=_.touch1[0],ne=_.touch1[1],Q=(Q=W[0]-j[0])*Q+(Q=W[1]-j[1])*Q,ee=(ee=ne[0]-B[0])*ee+(ee=ne[1]-B[1])*ee;V=v(V,Math.sqrt(Q/ee)),H=[(j[0]+W[0])/2,(j[1]+W[1])/2],Z=[(B[0]+ne[0])/2,(B[1]+ne[1])/2]}else if(_.touch0)H=_.touch0[0],Z=_.touch0[1];else return;_.zoom("touch",n(C(V,H,Z),_.extent,o))}}function S(p,...M){if(this.__zooming){var _=E(this,M).event(p),$=p.changedTouches,P=$.length,L,V;for(Nr(p),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),L=0;L<P;++L)V=$[L],_.touch0&&_.touch0[2]===V.identifier?delete _.touch0:_.touch1&&_.touch1[2]===V.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(V=Ce(V,this),Math.hypot(d[0]-V[0],d[1]-V[1])<k)){var H=Ee(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return x.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:kn(+p),x):r},x.filter=function(p){return arguments.length?(e=typeof p=="function"?p:kn(!!p),x):e},x.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:kn(!!p),x):i},x.extent=function(p){return arguments.length?(t=typeof p=="function"?p:kn([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),x):t},x.scaleExtent=function(p){return arguments.length?(s[0]=+p[0],s[1]=+p[1],x):[s[0],s[1]]},x.translateExtent=function(p){return arguments.length?(o[0][0]=+p[0][0],o[1][0]=+p[1][0],o[0][1]=+p[0][1],o[1][1]=+p[1][1],x):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},x.constrain=function(p){return arguments.length?(n=p,x):n},x.duration=function(p){return arguments.length?(a=+p,x):a},x.interpolate=function(p){return arguments.length?(c=p,x):c},x.on=function(){var p=l.on.apply(l,arguments);return p===l?x:p},x.clickDistance=function(p){return arguments.length?(b=(p=+p)*p,x):Math.sqrt(b)},x.tapDistance=function(p){return arguments.length?(k=+p,x):k},x}const Ge={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${n&&r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},de=Symbol.for("internals"),Gn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Lo=["Enter"," ","Escape"];var zt;(function(e){e.Strict="strict",e.Loose="loose"})(zt||(zt={}));var mt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(mt||(mt={}));var dn;(function(e){e.Partial="partial",e.Full="full"})(dn||(dn={}));var rt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(rt||(rt={}));var Kn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Kn||(Kn={}));var U;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(U||(U={}));const Ap=e=>"id"in e&&"source"in e&&"target"in e,Ip=e=>"id"in e&&!("source"in e)&&!("target"in e),Ot=(e,t=[0,0])=>{var s,o,a;if(!e)return{position:{x:0,y:0},positionAbsolute:{x:0,y:0}};const n=(((s=e.computed)==null?void 0:s.width)??e.width??0)*t[0],r=(((o=e.computed)==null?void 0:o.height)??e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{position:i,positionAbsolute:(a=e.computed)!=null&&a.positionAbsolute?{x:e.computed.positionAbsolute.x-n,y:e.computed.positionAbsolute.y-r}:i}},vn=(e,t={nodeOrigin:[0,0],useRelativePosition:!1})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{var o,a;const s=Ot(i,i.origin||t.nodeOrigin);return pi(r,Qn({...s[t.useRelativePosition?"position":"positionAbsolute"],width:((o=i.computed)==null?void 0:o.width)??i.width??0,height:((a=i.computed)==null?void 0:a.height)??i.height??0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return gi(n)},Zo=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const c={...gr(t,[n,r,i]),width:t.width/i,height:t.height/i};return e.reduce((u,d)=>{const{computed:f,selectable:g=!0,hidden:y=!1}=d,b=(f==null?void 0:f.width)??d.width??null,k=(f==null?void 0:f.height)??d.height??null;if(o&&!g||y)return u;const x=Jn(c,Fr(d,a)),v=b===null||k===null,C=s&&x>0,m=(b??0)*(k??0);return(v||C||x>=m||d.dragging)&&u.push(d),u},[])},$p=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Bo({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s,nodeOrigin:o=[0,0]},a){const c=e.filter(l=>{var d,f,g;const u=((d=l.computed)==null?void 0:d.width)&&((f=l.computed)==null?void 0:f.height)&&((a==null?void 0:a.includeHiddenNodes)||!l.hidden);return(g=a==null?void 0:a.nodes)!=null&&g.length?u&&(a==null?void 0:a.nodes.some(y=>y.id===l.id)):u});if(c.length>0){const l=vn(c,{nodeOrigin:o}),u=mi(l,t,n,(a==null?void 0:a.minZoom)??i,(a==null?void 0:a.maxZoom)??s,(a==null?void 0:a.padding)??.1);return r.setViewport(u,{duration:a==null?void 0:a.duration}),!0}return!1}function Rp(e,t){var n,r;return!t||t==="parent"?t:[t[0],[t[1][0]-(((n=e.computed)==null?void 0:n.width)??0),t[1][1]-(((r=e.computed)==null?void 0:r.height)??0)]]}function Xo({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){var f,g,y,b;const o=n.get(e),a=o.parentNode?n.get(o.parentNode):void 0,{x:c,y:l}=a?Ot(a,a.origin||r).positionAbsolute:{x:0,y:0};let u=Rp(o,o.extent||i);if(o.extent==="parent"&&!o.expandParent)if(!a)s==null||s("005",Ge.error005());else{const k=(f=o.computed)==null?void 0:f.width,x=(g=o.computed)==null?void 0:g.height,v=(y=a==null?void 0:a.computed)==null?void 0:y.width,C=(b=a==null?void 0:a.computed)==null?void 0:b.height;if(k&&x&&v&&C){const m=o.origin||r,w=c+k*m[0],E=l+x*m[1];u=[[w,E],[w+v-k,E+C-x]]}}else a&&es(o.extent)&&(u=[[o.extent[0][0]+c,o.extent[0][1]+l],[o.extent[1][0]+c,o.extent[1][1]+l]]);const d=es(u)?hi(t,u):t;return{position:{x:d.x-c,y:d.y-l},positionAbsolute:d}}async function zp({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=e.map(f=>f.id),o=[];for(const f of n){if(f.deletable===!1)continue;const g=s.includes(f.id),y=!g&&f.parentNode&&o.find(b=>b.id===f.parentNode);(g||y)&&o.push(f)}const a=t.map(f=>f.id),c=r.filter(f=>f.deletable!==!1),u=$p(o,c);for(const f of c)a.includes(f.id)&&!u.find(y=>y.id===f.id)&&u.push(f);if(!i)return{edges:u,nodes:o};const d=await i({nodes:o,edges:u});return typeof d=="boolean"?d?{edges:u,nodes:o}:{edges:[],nodes:[]}:d}const Pt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),hi=(e={x:0,y:0},t)=>({x:Pt(e.x,t[0][0],t[1][0]),y:Pt(e.y,t[0][1],t[1][1])}),Qi=(e,t,n)=>e<t?Pt(Math.abs(e-t),1,50)/50:e>n?-Pt(Math.abs(e-n),1,50)/50:0,Yo=(e,t)=>{const n=Qi(e.x,35,t.width-35)*20,r=Qi(e.y,35,t.height-35)*20;return[n,r]},pi=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Qn=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),gi=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Fr=(e,t=[0,0])=>{var r,i;const{positionAbsolute:n}=Ot(e,e.origin||t);return{...n,width:((r=e.computed)==null?void 0:r.width)??e.width??0,height:((i=e.computed)==null?void 0:i.height)??e.height??0}},Ji=(e,t=[0,0])=>{var r,i;const{positionAbsolute:n}=Ot(e,e.origin||t);return{...n,x2:n.x+(((r=e.computed)==null?void 0:r.width)??e.width??0),y2:n.y+(((i=e.computed)==null?void 0:i.height)??e.height??0)}},Pp=(e,t)=>gi(pi(Qn(e),Qn(t))),Jn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Dp=e=>ht(e.width)&&ht(e.height)&&ht(e.x)&&ht(e.y),ht=e=>!isNaN(e)&&isFinite(e),Op=(e,t)=>{},Vp=({x:e,y:t,width:n,height:r,origin:i=[0,0]})=>!n||!r||i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},pr=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),gr=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return s?pr(a,o):a},jo=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),mi=(e,t,n,r,i,s)=>{const o=t/(e.width*(1+s)),a=n/(e.height*(1+s)),c=Math.min(o,a),l=Pt(c,r,i),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*l,g=n/2-d*l;return{x:f,y:g,zoom:l}},er=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function es(e){return e!==void 0&&e!=="parent"}function jt(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r}){const{x:i,y:s}=Ue(e),o=gr({x:i,y:s},r),{x:a,y:c}=n?pr(o,t):o;return{xSnapped:a,ySnapped:c,...o}}const yi=e=>({width:e.offsetWidth,height:e.offsetHeight}),Uo=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Hp=["INPUT","SELECT","TEXTAREA"];function Wr(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return Hp.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const Fo=e=>"clientX"in e,Ue=(e,t)=>{var s,o;const n=Fo(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},ts=(e,t,n,r=[0,0])=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const s=Array.from(i),o=t.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return s.map(c=>{const l=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(l.left-o.left-a.x)/n,y:(l.top-o.top-a.y)/n,...yi(c)}})};function Wo({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const c=e*.125+i*.375+o*.375+n*.125,l=t*.125+s*.375+a*.375+r*.125,u=Math.abs(c-e),d=Math.abs(l-t);return[c,l,u,d]}function En(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ns({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case U.Left:return[t-En(t-r,s),n];case U.Right:return[t+En(r-t,s),n];case U.Top:return[t,n-En(n-i,s)];case U.Bottom:return[t,n+En(i-n,s)]}}function qo({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:s=U.Top,curvature:o=.25}){const[a,c]=ns({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[l,u]=ns({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[d,f,g,y]=Wo({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${c} ${l},${u} ${r},${i}`,d,f,g,y]}function Go({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function Lp({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){var a,c;if(!i)return r;const s=n||t.selected||e.selected,o=Math.max(((a=e[de])==null?void 0:a.z)||0,((c=t[de])==null?void 0:c.z)||0,1e3);return r+(s?o:0)}function Zp({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=pi(Ji(e),Ji(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Jn(o,gi(s))>0}const Bp=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Xp=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Yp=(e,t)=>{if(!e.source||!e.target)return t;let n;return Ap(e)?n={...e}:n={...e,id:Bp(e)},Xp(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function jp({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=Go({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const rs={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},Up=({source:e,sourcePosition:t=U.Bottom,target:n})=>t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},is=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Fp({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:r=U.Top,center:i,offset:s}){const o=rs[t],a=rs[r],c={x:e.x+o.x*s,y:e.y+o.y*s},l={x:n.x+a.x*s,y:n.y+a.y*s},u=Up({source:c,sourcePosition:t,target:l}),d=u.x!==0?"x":"y",f=u[d];let g=[],y,b;const k={x:0,y:0},x={x:0,y:0},[v,C,m,w]=Go({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[d]*a[d]===-1){y=i.x||v,b=i.y||C;const N=[{x:y,y:c.y},{x:y,y:l.y}],I=[{x:c.x,y:b},{x:l.x,y:b}];o[d]===f?g=d==="x"?N:I:g=d==="x"?I:N}else{const N=[{x:c.x,y:l.y}],I=[{x:l.x,y:c.y}];if(d==="x"?g=o.x===f?I:N:g=o.y===f?N:I,t===r){const S=Math.abs(e[d]-n[d]);if(S<=s){const p=Math.min(s-1,s-S);o[d]===f?k[d]=(c[d]>e[d]?-1:1)*p:x[d]=(l[d]>n[d]?-1:1)*p}}if(t!==r){const S=d==="x"?"y":"x",p=o[d]===a[S],M=c[S]>l[S],_=c[S]<l[S];(o[d]===1&&(!p&&M||p&&_)||o[d]!==1&&(!p&&_||p&&M))&&(g=d==="x"?N:I)}const D={x:c.x+k.x,y:c.y+k.y},T={x:l.x+x.x,y:l.y+x.y},R=Math.max(Math.abs(D.x-g[0].x),Math.abs(T.x-g[0].x)),A=Math.max(Math.abs(D.y-g[0].y),Math.abs(T.y-g[0].y));R>=A?(y=(D.x+T.x)/2,b=g[0].y):(y=g[0].x,b=(D.y+T.y)/2)}return[[e,{x:c.x+k.x,y:c.y+k.y},...g,{x:l.x+x.x,y:l.y+x.y},n],y,b,m,w]}function Wp(e,t,n,r){const i=Math.min(is(e,t)/2,is(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${s+i*l},${o}Q ${s},${o} ${s},${o+i*u}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${o+i*c}Q ${s},${o} ${s+i*a},${o}`}function qr({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:s=U.Top,borderRadius:o=5,centerX:a,centerY:c,offset:l=20}){const[u,d,f,g,y]=Fp({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:c},offset:l});return[u.reduce((k,x,v)=>{let C="";return v>0&&v<u.length-1?C=Wp(u[v-1],x,u[v+1],o):C=`${v===0?"M":"L"}${x.x} ${x.y}`,k+=C,k},""),d,f,g,y]}function ss(e){var t,n,r;return!!((t=e==null?void 0:e[de])!=null&&t.handleBounds||(n=e==null?void 0:e.handles)!=null&&n.length)&&!!((r=e==null?void 0:e.computed)!=null&&r.width||e!=null&&e.width)}function qp(e){var g,y,b;const{sourceNode:t,targetNode:n}=e;if(!ss(t)||!ss(n))return null;const r=((g=t[de])==null?void 0:g.handleBounds)||os(t.handles),i=((y=n[de])==null?void 0:y.handleBounds)||os(n.handles),s=cs((r==null?void 0:r.source)??[],e.sourceHandle),o=cs(e.connectionMode===zt.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle),a=(s==null?void 0:s.position)||U.Bottom,c=(o==null?void 0:o.position)||U.Top;if(!s||!o)return(b=e.onError)==null||b.call(e,"008",Ge.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const[l,u]=as(a,t,s),[d,f]=as(c,n,o);return{sourceX:l,sourceY:u,targetX:d,targetY:f,sourcePosition:a,targetPosition:c}}function os(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width||1,r.height=r.height||1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function as(e,t,n=null){var a,c,l,u,d,f;const r=((n==null?void 0:n.x)??0)+(((c=(a=t.computed)==null?void 0:a.positionAbsolute)==null?void 0:c.x)??0),i=((n==null?void 0:n.y)??0)+(((u=(l=t.computed)==null?void 0:l.positionAbsolute)==null?void 0:u.y)??0),s=(n==null?void 0:n.width)||(((d=t==null?void 0:t.computed)==null?void 0:d.width)??(t==null?void 0:t.width)??0),o=(n==null?void 0:n.height)||(((f=t==null?void 0:t.computed)==null?void 0:f.height)??(t==null?void 0:t.height)??0);switch(e){case U.Top:return[r+s/2,i];case U.Right:return[r+s,i+o/2];case U.Bottom:return[r+s/2,i+o];case U.Left:return[r,i+o/2]}}function cs(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Gr(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Gp(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,a)=>([a.markerStart||r,a.markerEnd||i].forEach(c=>{if(c&&typeof c=="object"){const l=Gr(c,t);s.has(l)||(o.push({id:l,color:c.color||n,...c}),s.add(l))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}function Ko(e,t,n=[0,0],r){return e.map(i=>{var s,o,a,c,l,u;if(i.parentNode&&!t.has(i.parentNode))throw new Error(`Parent node ${i.parentNode} not found`);if(i.parentNode||r!=null&&r[i.id]){const d=i.parentNode?t.get(i.parentNode):null,{x:f,y:g,z:y}=Jo(i,e,t,{...i.position,z:((s=i[de])==null?void 0:s.z)??0},(d==null?void 0:d.origin)||n),b=f!==((a=(o=i.computed)==null?void 0:o.positionAbsolute)==null?void 0:a.x)||g!==((l=(c=i.computed)==null?void 0:c.positionAbsolute)==null?void 0:l.y);i.computed.positionAbsolute=b?{x:f,y:g}:(u=i.computed)==null?void 0:u.positionAbsolute,i[de].z=y,r!=null&&r[i.id]&&(i[de].isParent=!0)}return i})}function Qo(e,t,n={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}}){const r=new Map(t);t.clear();const i={},s=n!=null&&n.elevateNodesOnSelect?1e3:0,o=e.map(c=>{var g,y,b;const l=r.get(c.id);if(c===((g=l==null?void 0:l[de])==null?void 0:g.userProvidedNode))return t.set(c.id,l),l;const u={...n.defaults,...c,computed:{positionAbsolute:c.position,width:(y=c.computed)==null?void 0:y.width,height:(b=c.computed)==null?void 0:b.height}},d=(ht(c.zIndex)?c.zIndex:0)+(c.selected?s:0),f=(c==null?void 0:c[de])||(l==null?void 0:l[de]);return u.parentNode&&(i[u.parentNode]=!0),Object.defineProperty(u,de,{enumerable:!1,value:{handleBounds:f==null?void 0:f.handleBounds,z:d,userProvidedNode:c}}),t.set(u.id,u),u});return Ko(o,t,n.nodeOrigin,i)}function Jo(e,t,n,r,i){var a,c;if(!e.parentNode)return r;const s=n.get(e.parentNode),{position:o}=Ot(s,(s==null?void 0:s.origin)||i);return Jo(s,t,n,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((a=s[de])==null?void 0:a.z)??0)>(r.z??0)?((c=s[de])==null?void 0:c.z)??0:r.z??0},s.origin||i)}function Kp(e,t,n,r,i,s){const o=r==null?void 0:r.querySelector(".xyflow__viewport");if(!o)return null;const a=window.getComputedStyle(o),{m22:c}=new window.DOMMatrixReadOnly(a.transform);return t.map(u=>{var f,g;const d=e.get(u.id);if(d){const y=yi(d.nodeElement);if(!!(y.width&&y.height&&(((f=u.computed)==null?void 0:f.width)!==y.width||((g=u.computed)==null?void 0:g.height)!==y.height||d.forceUpdate))){s==null||s(u.id,y);const k={...u,computed:{...u.computed,...y},[de]:{...u[de],handleBounds:{source:ts(".source",d.nodeElement,c,u.origin||i),target:ts(".target",d.nodeElement,c,u.origin||i)}}};return n.set(u.id,k),k}}return u})}function Qp({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return!1;const o=t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r);return!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2])}function ea(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:a=null}=r,c=`${i}-source-${o}`,l=`${s}-target-${a}`,u=e.get(c)||new Map,d=e.get(l)||new Map,f={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:a};t.set(r.id,r),e.set(c,u.set(`${s}-${a}`,f)),e.set(l,d.set(`${i}-${o}`,f))}}function Tr(e){return(t,n,r)=>e==null?void 0:e(t,r)}function ta(e,t){if(!e.parentNode)return!1;const n=t.find(r=>r.id===r.parentNode);return n?n.selected?!0:ta(n,t):!1}function ls(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function Jp(e,t,n,r){return e.filter(i=>(i.selected||i.id===r)&&(!i.parentNode||!ta(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var s,o,a,c,l,u,d;return{id:i.id,position:i.position||{x:0,y:0},distance:{x:n.x-(((o=(s=i.computed)==null?void 0:s.positionAbsolute)==null?void 0:o.x)??0),y:n.y-(((c=(a=i.computed)==null?void 0:a.positionAbsolute)==null?void 0:c.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode,origin:i.origin,expandParent:i.expandParent,computed:{positionAbsolute:((l=i.computed)==null?void 0:l.positionAbsolute)||{x:0,y:0},width:((u=i.computed)==null?void 0:u.width)||0,height:((d=i.computed)==null?void 0:d.height)||0}}})}function Cr({nodeId:e,dragItems:t,nodeLookup:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,computed:{...i.computed,positionAbsolute:i.computed.positionAbsolute}}));return[e?r.find(i=>i.id===e):r[0],r]}function eg({domNode:e,onNodeMouseDown:t,getStoreItems:n,onDragStart:r,onDrag:i,onDragStop:s}){let o={x:null,y:null},a=0,c=[],l=!1,u={x:0,y:0},d=null,f=null,g=!1;const y=Ee(e);function b({noDragClassName:x,handleSelector:v,domNode:C,isSelectable:m,nodeId:w}){function E({x:T,y:R}){const{nodeLookup:A,nodeExtent:S,snapGrid:p,snapToGrid:M,nodeOrigin:_,onNodeDrag:$,onSelectionDrag:P,onError:L,updateNodePositions:V}=n();o={x:T,y:R};let H=!1,Z={x:0,y:0,x2:0,y2:0};if(c.length>1&&S){const B=vn(c,{nodeOrigin:_});Z=Qn(B)}if(c=c.map(B=>{var ae,be;let W={x:T-B.distance.x,y:R-B.distance.y};M&&(W=pr(W,p));const ne=[[S[0][0],S[0][1]],[S[1][0],S[1][1]]];c.length>1&&S&&!B.extent&&(ne[0][0]=B.computed.positionAbsolute.x-Z.x+S[0][0],ne[1][0]=B.computed.positionAbsolute.x+(((ae=B.computed)==null?void 0:ae.width)??0)-Z.x2+S[1][0],ne[0][1]=B.computed.positionAbsolute.y-Z.y+S[0][1],ne[1][1]=B.computed.positionAbsolute.y+(((be=B.computed)==null?void 0:be.height)??0)-Z.y2+S[1][1]);const{position:Q,positionAbsolute:ee}=Xo({nodeId:B.id,nextPosition:W,nodeLookup:A,nodeExtent:ne,nodeOrigin:_,onError:L});return H=H||B.position.x!==Q.x||B.position.y!==Q.y,B.position=Q,B.computed.positionAbsolute=ee,B}),!H)return;V(c,!0);const j=w?$:Tr(P);if(d&&(i||j)){const[B,W]=Cr({nodeId:w,dragItems:c,nodeLookup:A});i==null||i(d,c,B,W),j==null||j(d,B,W)}}function N(){if(!f)return;const[T,R]=Yo(u,f);if(T!==0||R!==0){const{transform:A,panBy:S}=n();o.x=(o.x??0)-T/A[2],o.y=(o.y??0)-R/A[2],S({x:T,y:R})&&E(o)}a=requestAnimationFrame(N)}function I(T){var B;const{nodes:R,nodeLookup:A,multiSelectionActive:S,nodesDraggable:p,transform:M,snapGrid:_,snapToGrid:$,selectNodesOnDrag:P,onNodeDragStart:L,onSelectionDragStart:V,unselectNodesAndEdges:H}=n();g=!0,(!P||!m)&&!S&&w&&((B=A.get(w))!=null&&B.selected||H()),m&&P&&w&&(t==null||t(w));const Z=jt(T.sourceEvent,{transform:M,snapGrid:_,snapToGrid:$});o=Z,c=Jp(R,p,Z,w);const j=w?L:Tr(V);if(c.length>0&&(r||j)){const[W,ne]=Cr({nodeId:w,dragItems:c,nodeLookup:A});r==null||r(T.sourceEvent,c,W,ne),j==null||j(T.sourceEvent,W,ne)}}const D=ko().on("start",T=>{const{domNode:R,nodeDragThreshold:A,transform:S,snapGrid:p,snapToGrid:M}=n();A===0&&I(T),o=jt(T.sourceEvent,{transform:S,snapGrid:p,snapToGrid:M}),f=(R==null?void 0:R.getBoundingClientRect())||null,u=Ue(T.sourceEvent,f)}).on("drag",T=>{const{autoPanOnNodeDrag:R,transform:A,snapGrid:S,snapToGrid:p,nodeDragThreshold:M}=n(),_=jt(T.sourceEvent,{transform:A,snapGrid:S,snapToGrid:p});if(!l&&R&&g&&(l=!0,N()),!g){const $=_.xSnapped-(o.x??0),P=_.ySnapped-(o.y??0);Math.sqrt($*$+P*P)>M&&I(T)}(o.x!==_.xSnapped||o.y!==_.ySnapped)&&c&&g&&(d=T.sourceEvent,u=Ue(T.sourceEvent,f),E(_))}).on("end",T=>{if(g&&(l=!1,g=!1,cancelAnimationFrame(a),c.length>0)){const{nodeLookup:R,updateNodePositions:A,onNodeDragStop:S,onSelectionDragStop:p}=n(),M=w?S:Tr(p);if(A(c,!1),s||M){const[_,$]=Cr({nodeId:w,dragItems:c,nodeLookup:R});s==null||s(T.sourceEvent,c,_,$),M==null||M(T.sourceEvent,_,$)}}}).filter(T=>{const R=T.target;return!T.button&&(!x||!ls(R,`.${x}`,C))&&(!v||ls(R,v,C))});y.call(D)}function k(){y.on(".drag",null)}return{update:b,destroy:k}}function us(e,t,n,r){return(t[n]||[]).reduce((i,s)=>{var o,a,c,l;return`${e.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:e.id,x:(((a=(o=e.computed)==null?void 0:o.positionAbsolute)==null?void 0:a.x)??0)+s.x+s.width/2,y:(((l=(c=e.computed)==null?void 0:c.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),i},[])}function tg(e,t,n){let r=[],i=1/0;return n.forEach(s=>{const o=Math.sqrt(Math.pow(s.x-e.x,2)+Math.pow(s.y-e.y,2));o<=t&&(o<i?r=[s]:o===i&&r.push(s),i=o)}),r.length?r.length===1?r[0]:r.find(s=>s.type==="target")||r[0]:null}function ng({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,s)=>{if(s[de]){const{handleBounds:o}=s[de];let a=[],c=[];o&&(a=us(s,o,"source",`${t}-${n}-${r}`),c=us(s,o,"target",`${t}-${n}-${r}`)),i.push(...a,...c)}return i},[])}function na(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Mr(e,t){e==null||e.classList.remove("valid","connecting",`${t}-flow__handle-valid`,`${t}-flow__handle-connecting`)}function rg(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const ra=()=>!0;let Nn=null;function ig(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:a,nodes:c,lib:l,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:g,onConnectStart:y,onConnect:b,onConnectEnd:k,isValidConnection:x=ra,onEdgeUpdateEnd:v,updateConnection:C,getTransform:m}){const w=Uo(e.target);let E=0,N;const{x:I,y:D}=Ue(e),T=w==null?void 0:w.elementFromPoint(I,D),R=na(s,T),A=a==null?void 0:a.getBoundingClientRect();if(!A||!R)return;let S,p=Ue(e,A),M=!1,_=null,$=!1,P=null;const L=ng({nodes:c,nodeId:i,handleId:r,handleType:R});function V(){if(!u||!A)return;const[j,B]=Yo(p,A);f({x:j,y:B}),E=requestAnimationFrame(V)}Nn={nodeId:i,handleId:r,type:R},C({connectionPosition:p,connectionStatus:null,connectionStartHandle:Nn,connectionEndHandle:null}),y==null||y(e,{nodeId:i,handleId:r,handleType:R});function H(j){const B=m();p=Ue(j,A),N=tg(gr(p,B,!1,[1,1]),n,L),M||(V(),M=!0);const W=ia(j,{handle:N,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:x,doc:w,lib:l,flowId:d});if(P=W.handleDomNode,_=W.connection,$=W.isValid,C({connectionStartHandle:Nn,connectionPosition:N&&$?jo({x:N.x,y:N.y},B):p,connectionStatus:rg(!!N,$),connectionEndHandle:W.endHandle}),!N&&!$&&!P)return Mr(S,l);(_==null?void 0:_.source)!==(_==null?void 0:_.target)&&P&&(Mr(S,l),S=P,P.classList.add("connecting",`${l}-flow__handle-connecting`),P.classList.toggle("valid",$),P.classList.toggle(`${l}-flow__handle-valid`,$))}function Z(j){(N||P)&&_&&$&&(b==null||b(_)),k==null||k(j),s&&(v==null||v(j)),Mr(S,l),g(),cancelAnimationFrame(E),M=!1,$=!1,_=null,P=null,Nn=null,w.removeEventListener("mousemove",H),w.removeEventListener("mouseup",Z),w.removeEventListener("touchmove",H),w.removeEventListener("touchend",Z)}w.addEventListener("mousemove",H),w.addEventListener("mouseup",Z),w.addEventListener("touchmove",H),w.addEventListener("touchend",Z)}function ia(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:a,flowId:c,isValidConnection:l=ra}){const u=s==="target",d=t?o.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:f,y:g}=Ue(e),y=o.elementFromPoint(f,g),b=y!=null&&y.classList.contains(`${a}-flow__handle`)?y:d,k={handleDomNode:b,isValid:!1,connection:null,endHandle:null};if(b){const x=na(void 0,b),v=b.getAttribute("data-nodeid"),C=b.getAttribute("data-handleid"),m=b.classList.contains("connectable"),w=b.classList.contains("connectableend");if(!v)return k;const E={source:u?v:r,sourceHandle:u?C:i,target:u?r:v,targetHandle:u?i:C};k.connection=E,m&&w&&(n===zt.Strict?u&&x==="source"||!u&&x==="target":v!==r||C!==i)&&(k.endHandle={nodeId:v,handleId:C,type:x},k.isValid=l(E))}return k}const Kr={onPointerDown:ig,isValid:ia};function sg({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=Ee(e);function s({translateExtent:a,width:c,height:l,zoomStep:u=10,pannable:d=!0,zoomable:f=!0,inversePan:g=!1}){const y=x=>{const v=n();if(x.sourceEvent.type!=="wheel"||!t)return;const C=-x.sourceEvent.deltaY*(x.sourceEvent.deltaMode===1?.05:x.sourceEvent.deltaMode?1:.002)*u,m=v[2]*Math.pow(2,C);t.scaleTo(m)},b=x=>{const v=n();if(x.sourceEvent.type!=="mousemove"||!t)return;const C=r()*Math.max(v[2],Math.log(v[2]))*(g?-1:1),m={x:v[0]-x.sourceEvent.movementX*C,y:v[1]-x.sourceEvent.movementY*C},w=[[0,0],[c,l]];t.setViewportConstrained({x:m.x,y:m.y,zoom:v[2]},w,a)},k=Ho().on("zoom",d?b:null).on("zoom.wheel",f?y:null);i.call(k,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Ce}}const og=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,mr=e=>({x:e.x,y:e.y,zoom:e.k}),Ar=({x:e,y:t,zoom:n})=>hr.translate(e,t).scale(n),Et=(e,t)=>e.target.closest(`.${t}`),sa=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Ir=(e,t=0)=>typeof t=="number"&&t>0?e.transition().duration(t):e,oa=e=>{const t=e.ctrlKey&&er()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function ag({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(Et(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1,f=er();if(u.ctrlKey&&o&&f){const x=Ce(u),v=oa(u),C=d*Math.pow(2,v);r.scaleTo(n,C,x,u);return}const g=u.deltaMode===1?20:1;let y=i===mt.Vertical?0:u.deltaX*g,b=i===mt.Horizontal?0:u.deltaY*g;!f&&u.shiftKey&&i!==mt.Vertical&&(y=u.deltaY*g,b=0),r.translateBy(n,-(y/d)*s,-(b/d)*s,{internal:!0});const k=mr(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(u,k)),e.isPanScrolling&&(c==null||c(u,k),e.panScrollTimeout=setTimeout(()=>{l==null||l(u,k),e.isPanScrolling=!1},150))}}function cg({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){if(!t||Et(r,e))return null;r.preventDefault(),n.call(this,r,i)}}function lg({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var s,o,a;if((s=r.sourceEvent)!=null&&s.internal)return;const i=mr(r.transform);e.mouseButton=((o=r.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function ug({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{var o,a;e.usedRightMouseButton=!!(n&&sa(t,e.mouseButton??0)),(o=s.sourceEvent)!=null&&o.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!((a=s.sourceEvent)!=null&&a.internal)&&(i==null||i(s.sourceEvent,mr(s.transform)))}}function dg({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{var a;if(!((a=o.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,s&&sa(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&og(e.prevViewport,o.transform))){const c=mr(o.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(o.sourceEvent,c)},n?150:0)}}}function fg({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:a,noPanClassName:c,lib:l}){return u=>{const d=e||t,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Et(u,`${l}-flow__node`)||Et(u,`${l}-flow__edge`)))return!0;if(!r&&!d&&!i&&!s&&!n||o||!s&&u.type==="dblclick"||Et(u,a)&&u.type==="wheel"||Et(u,c)&&(u.type!=="wheel"||i&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel"||!d&&!i&&!f&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&(u.type==="mousedown"||u.type==="touchstart"))return!1;const g=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&g}}function hg({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:a,onTransformChange:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=Ho().scaleExtent([t,n]).translateExtent(r),g=Ee(e).call(f);v({x:i.x,y:i.y,zoom:Pt(i.zoom,t,n)},[[0,0],[d.width,d.height]],r);const y=g.on("wheel.zoom");f.wheelDelta(oa);function b(T,R){g&&(f==null||f.transform(Ir(g,R==null?void 0:R.duration),T))}function k({noWheelClassName:T,noPanClassName:R,onPaneContextMenu:A,userSelectionActive:S,panOnScroll:p,panOnDrag:M,panOnScrollMode:_,panOnScrollSpeed:$,preventScrolling:P,zoomOnPinch:L,zoomOnScroll:V,zoomOnDoubleClick:H,zoomActivationKeyPressed:Z,lib:j}){S&&!u.isZoomingOrPanning&&x();const W=p&&!Z&&!S?ag({zoomPanValues:u,noWheelClassName:T,d3Selection:g,d3Zoom:f,panOnScrollMode:_,panOnScrollSpeed:$,zoomOnPinch:L,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:a}):cg({noWheelClassName:T,preventScrolling:P,d3ZoomHandler:y});if(g.on("wheel.zoom",W,{passive:!1}),!S){const Q=lg({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:o});f.on("start",Q);const ee=ug({zoomPanValues:u,panOnDrag:M,onPaneContextMenu:!!A,onPanZoom:s,onTransformChange:c});f.on("zoom",ee);const ae=dg({zoomPanValues:u,panOnDrag:M,panOnScroll:p,onPaneContextMenu:A,onPanZoomEnd:a,onDraggingChange:l});f.on("end",ae)}const ne=fg({zoomActivationKeyPressed:Z,panOnDrag:M,zoomOnScroll:V,panOnScroll:p,zoomOnDoubleClick:H,zoomOnPinch:L,userSelectionActive:S,noPanClassName:R,noWheelClassName:T,lib:j});f.filter(ne)}function x(){f.on("zoom",null)}function v(T,R,A){const S=Ar(T),p=f==null?void 0:f.constrain()(S,R,A);return p&&b(p),p}function C(T,R){const A=Ar(T);return b(A,R),A}function m(T){if(g){const R=Ar(T),A=g.property("__zoom");(A.k!==T.zoom||A.x!==T.x||A.y!==T.y)&&(f==null||f.transform(g,R,null,{sync:!0}))}}function w(){const T=g?Vo(g.node()):{x:0,y:0,k:1};return{x:T.x,y:T.y,zoom:T.k}}function E(T,R){g&&(f==null||f.scaleTo(Ir(g,R==null?void 0:R.duration),T))}function N(T,R){g&&(f==null||f.scaleBy(Ir(g,R==null?void 0:R.duration),T))}function I(T){f==null||f.scaleExtent(T)}function D(T){f==null||f.translateExtent(T)}return{update:k,destroy:x,setViewport:C,setViewportConstrained:v,getViewport:w,scaleTo:E,scaleBy:N,setScaleExtent:I,setTranslateExtent:D,syncViewport:m}}var Ut;(function(e){e.Line="line",e.Handle="handle"})(Ut||(Ut={}));function pg({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,a=n-r,c=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(c[0]=c[0]*-1),a&&s&&(c[1]=c[1]*-1),c}function gg(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Je(e,t){return Math.max(0,t-e)}function et(e,t){return Math.max(0,e-t)}function Tn(e,t,n){return Math.max(0,t-e,e-n)}function ds(e,t){return e?!t:t}function mg(e,t,n,r,i,s,o){let{affectsX:a,affectsY:c}=t;const{isHorizontal:l,isVertical:u}=t,d=l&&u,{xSnapped:f,ySnapped:g}=n,{minWidth:y,maxWidth:b,minHeight:k,maxHeight:x}=r,{x:v,y:C,width:m,height:w,aspectRatio:E}=e;let N=Math.floor(l?f-e.pointerX:0),I=Math.floor(u?g-e.pointerY:0);const D=m+(a?-N:N),T=w+(c?-I:I);let R=Tn(D,y,b),A=Tn(T,k,x);if(s){let S=0,p=0;a&&N<0?S=Je(v+N,s[0][0]):!a&&N>0&&(S=et(v+D,s[1][0])),c&&I<0?p=Je(C+I,s[0][1]):!c&&I>0&&(p=et(C+T,s[1][1])),R=Math.max(R,S),A=Math.max(A,p)}if(o){let S=0,p=0;a&&N>0?S=et(v+N,o[0][0]):!a&&N<0&&(S=Je(v+D,o[1][0])),c&&I>0?p=et(C+I,o[0][1]):!c&&I<0&&(p=Je(C+T,o[1][1])),R=Math.max(R,S),A=Math.max(A,p)}if(i){if(l){const S=Tn(D/E,k,x)*E;if(R=Math.max(R,S),s){let p=0;!a&&!c||a&&!c&&d?p=et(C+D/E,s[1][1])*E:p=Je(C+(a?N:-N)/E,s[0][1])*E,R=Math.max(R,p)}if(o){let p=0;!a&&!c||a&&!c&&d?p=Je(C+D/E,o[1][1])*E:p=et(C+(a?N:-N)/E,o[0][1])*E,R=Math.max(R,p)}}if(u){const S=Tn(T*E,y,b)/E;if(A=Math.max(A,S),s){let p=0;!a&&!c||c&&!a&&d?p=et(v+T*E,s[1][0])/E:p=Je(v+(c?I:-I)*E,s[0][0])/E,A=Math.max(A,p)}if(o){let p=0;!a&&!c||c&&!a&&d?p=Je(v+T*E,o[1][0])/E:p=et(v+(c?I:-I)*E,o[0][0])/E,A=Math.max(A,p)}}}return I=I+(I<0?A:-A),N=N+(N<0?R:-R),i&&(d?D>T*E?I=(ds(a,c)?-N:N)/E:N=(ds(a,c)?-I:I)*E:l?(I=N/E,c=a):(N=I*E,a=c)),{width:m+(a?-N:N),height:w+(c?-I:I),x:a?v+N:v,y:c?C+I:C}}const aa={width:0,height:0,x:0,y:0},yg={...aa,pointerX:0,pointerY:0,aspectRatio:1},vg={x:0,y:0,width:0,height:0,isXPosChange:!1,isYPosChange:!1,isWidthChange:!1,isHeightChange:!1};function xg(e){return[[0,0],[e.computed.width,e.computed.height]]}function wg(e,t){return[[t.position.x+e.position.x,t.position.y+e.position.y],[t.position.x+e.position.x+e.computed.width,t.position.y+e.position.y+e.computed.height]]}function _g({domNode:e,nodeId:t,getStoreItems:n,onChange:r}){const i=Ee(e);function s({controlPosition:a,boundaries:c,keepAspectRatio:l,onResizeStart:u,onResize:d,onResizeEnd:f,shouldResize:g}){let y={...aa},b={...yg};const k=gg(a);let x,v=[],C,m,w;const E=ko().on("start",N=>{var A,S;const{nodeLookup:I,transform:D,snapGrid:T,snapToGrid:R}=n();if(x=I.get(t),x){const{xSnapped:p,ySnapped:M}=jt(N.sourceEvent,{transform:D,snapGrid:T,snapToGrid:R});y={width:((A=x.computed)==null?void 0:A.width)??0,height:((S=x.computed)==null?void 0:S.height)??0,x:x.position.x??0,y:x.position.y??0},b={...y,pointerX:p,pointerY:M,aspectRatio:y.width/y.height},C=void 0,(x.extent==="parent"||x.expandParent)&&(C=I.get(x.parentNode),C&&x.extent==="parent"&&(m=xg(C))),v=[],w=void 0;for(const[_,$]of I)if($.parentNode===t&&(v.push({id:_,position:{...$.position},extent:$.extent}),$.extent==="parent"||$.expandParent)){const P=wg($,x);w?w=[[Math.min(P[0][0],w[0][0]),Math.min(P[0][1],w[0][1])],[Math.max(P[1][0],w[1][0]),Math.max(P[1][1],w[1][1])]]:w=P}u==null||u(N,{...y})}}).on("drag",N=>{const{transform:I,snapGrid:D,snapToGrid:T}=n(),R=jt(N.sourceEvent,{transform:I,snapGrid:D,snapToGrid:T}),A=[];if(x){const S={...vg},{x:p,y:M,width:_,height:$}=y,{width:P,height:L,x:V,y:H}=mg(b,k,R,c,l,m,w),Z=P!==_,j=L!==$;if(k.affectsX||k.affectsY){const Q=V!==p&&Z,ee=H!==M&&j;if((Q||ee)&&(S.isXPosChange=Q,S.isYPosChange=ee,S.x=Q?V:p,S.y=ee?H:M,y.x=S.x,y.y=S.y,C&&x.expandParent&&(S.x<0&&(y.x=0,b.x=b.x-S.x),S.y<0&&(y.y=0,b.y=b.y-S.y))),v.length>0){const ae=V-p,be=H-M;for(const G of v)G.position={x:G.position.x-ae,y:G.position.y-be},A.push(G)}}if((Z||j)&&(S.isWidthChange=Z,S.isHeightChange=j,S.width=P,S.height=L,y.width=S.width,y.height=S.height),!S.isXPosChange&&!S.isYPosChange&&!Z&&!j)return;const B=pg({width:y.width,prevWidth:_,height:y.height,prevHeight:$,affectsX:k.affectsX,affectsY:k.affectsY}),W={...y,direction:B};if((g==null?void 0:g(N,W))===!1)return;d==null||d(N,W),r(S,A)}}).on("end",N=>{f==null||f(N,{...y})});i.call(E)}function o(){i.on(".drag",null)}return{update:s,destroy:o}}var ca={exports:{}},la={},ua={exports:{}},da={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt=ei;function bg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sg=typeof Object.is=="function"?Object.is:bg,kg=Dt.useState,Eg=Dt.useEffect,Ng=Dt.useLayoutEffect,Tg=Dt.useDebugValue;function Cg(e,t){var n=t(),r=kg({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return Ng(function(){i.value=n,i.getSnapshot=t,$r(i)&&s({inst:i})},[e,n,t]),Eg(function(){return $r(i)&&s({inst:i}),e(function(){$r(i)&&s({inst:i})})},[e]),Tg(n),n}function $r(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Sg(e,n)}catch{return!0}}function Mg(e,t){return t()}var Ag=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Mg:Cg;da.useSyncExternalStore=Dt.useSyncExternalStore!==void 0?Dt.useSyncExternalStore:Ag;ua.exports=da;var Ig=ua.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yr=ei,$g=Ig;function Rg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zg=typeof Object.is=="function"?Object.is:Rg,Pg=$g.useSyncExternalStore,Dg=yr.useRef,Og=yr.useEffect,Vg=yr.useMemo,Hg=yr.useDebugValue;la.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Dg(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Vg(function(){function c(g){if(!l){if(l=!0,u=g,g=r(g),i!==void 0&&o.hasValue){var y=o.value;if(i(y,g))return d=y}return d=g}if(y=d,zg(u,g))return y;var b=r(g);return i!==void 0&&i(y,b)?y:(u=g,d=b)}var l=!1,u,d,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,r,i]);var a=Pg(e,s[0],s[1]);return Og(function(){o.hasValue=!0,o.value=a},[a]),Hg(a),a};ca.exports=la;var Lg=ca.exports;const Zg=Yc(Lg);var Bg={BASE_URL:"/test-islandjs/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,ENABLE_SPA:!0};const fs=e=>{let t;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const g=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(y=>y(t,g))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Bg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(r,i,c);return c},Xg=e=>e?fs(e):fs,{useDebugValue:Yg}=ei,{useSyncExternalStoreWithSelector:jg}=Zg,Ug=e=>e;function fa(e,t=Ug,n){const r=jg(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Yg(r),r}const hs=(e,t)=>{const n=Xg(e),r=(i,s=t)=>fa(n,i,s);return Object.assign(r,n),r},Fg=(e,t)=>e?hs(e,t):hs;function fe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}const vr=Rs(null),Wg=vr.Provider,ha=Ge.error001();function re(e,t){const n=ir(vr);if(n===null)throw new Error(ha);return fa(n,e,t)}const he=()=>{const e=ir(vr);if(e===null)throw new Error(ha);return Ve(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},ps={display:"none"},qg={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},pa="react-flow__node-desc",ga="react-flow__edge-desc",Gg="react-flow__aria-live",Kg=e=>e.ariaLiveMessage;function Qg({rfId:e}){const t=re(Kg);return z("div",{id:`${Gg}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:qg,children:t})}function Jg({rfId:e,disableKeyboardA11y:t}){return ge(qe,{children:[ge("div",{id:`${pa}-${e}`,style:ps,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),z("div",{id:`${ga}-${e}`,style:ps,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&z(Qg,{rfId:e})]})}const em=e=>e.userSelectionActive?"none":"all";function vi({position:e="top-left",children:t,className:n,style:r,...i}){const s=re(em),o=`${e}`.split("-");return z("div",{className:pe(["react-flow__panel",n,...o]),style:{...r,pointerEvents:s},...i,children:t})}function tm({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:z(vi,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:z("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const nm=e=>({selectedNodes:e.nodes.filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Cn=e=>e.id;function rm(e,t){return fe(e.selectedNodes.map(Cn),t.selectedNodes.map(Cn))&&fe(e.selectedEdges.map(Cn),t.selectedEdges.map(Cn))}function im({onSelectionChange:e}){const t=he(),{selectedNodes:n,selectedEdges:r}=re(nm,rm);return le(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const sm=e=>!!e.onSelectionChangeHandlers;function om({onSelectionChange:e}){const t=re(sm);return e||t?z(im,{onSelectionChange:e}):null}const ma=[0,0],am={x:0,y:0,zoom:1},cm=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesUpdatable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete"],gs=[...cm,"rfId"],lm=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),ms={translateExtent:Gn,nodeOrigin:ma,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function um(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:c}=re(lm,fe),l=he();le(()=>(c(e.defaultNodes,e.defaultEdges),()=>{u.current=ms,a()}),[]);const u=oe(ms);return le(()=>{for(const d of gs){const f=e[d],g=u.current[d];f!==g&&(typeof e[d]>"u"||(d==="nodes"?t(f):d==="edges"?n(f):d==="minZoom"?r(f):d==="maxZoom"?i(f):d==="translateExtent"?s(f):d==="nodeExtent"?o(f):d==="fitView"?l.setState({fitViewOnInit:f}):d==="fitViewOptions"?l.setState({fitViewOnInitOptions:f}):l.setState({[d]:f})))}u.current=e},gs.map(d=>e[d])),null}function ys(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function dm(e){var r;const[t,n]=yt(e==="system"?null:e);return le(()=>{if(e!=="system"){n(e);return}const i=ys(),s=()=>n(i!=null&&i.matches?"dark":"light");return s(),i==null||i.addEventListener("change",s),()=>{i==null||i.removeEventListener("change",s)}},[e]),t!==null?t:(r=ys())!=null&&r.matches?"dark":"light"}const vs=typeof document<"u"?document:null;function fn(e=null,t={target:vs,actInsideInputWithModifier:!0}){const[n,r]=yt(!1),i=oe(!1),s=oe(new Set([])),[o,a]=Ve(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),u=l.reduce((d,f)=>d.concat(...f),[]);return[l,u]}return[[],[]]},[e]);return le(()=>{const c=(t==null?void 0:t.target)||vs;if(e!==null){const l=f=>{if(i.current=f.ctrlKey||f.metaKey||f.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Wr(f))return!1;const y=ws(f.code,a);s.current.add(f[y]),xs(o,s.current,!1)&&(f.preventDefault(),r(!0))},u=f=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Wr(f))return!1;const y=ws(f.code,a);xs(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(f[y]),f.key==="Meta"&&s.current.clear(),i.current=!1},d=()=>{s.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",l),c==null||c.addEventListener("keyup",u),window.addEventListener("blur",d),()=>{c==null||c.removeEventListener("keydown",l),c==null||c.removeEventListener("keyup",u),window.removeEventListener("blur",d)}}},[e,r]),n}function xs(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function ws(e,t){return t.includes(e)?"code":"key"}const fm=e=>!!e.panZoom,hm=()=>{const e=he(),t=re(fm);return Ve(()=>({zoomIn:r=>{var i;return(i=e.getState().panZoom)==null?void 0:i.scaleBy(1.2,{duration:r==null?void 0:r.duration})},zoomOut:r=>{var i;return(i=e.getState().panZoom)==null?void 0:i.scaleBy(1/1.2,{duration:r==null?void 0:r.duration})},zoomTo:(r,i)=>{var s;return(s=e.getState().panZoom)==null?void 0:s.scaleTo(r,{duration:i==null?void 0:i.duration})},getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{const{transform:[s,o,a],panZoom:c}=e.getState();c==null||c.setViewport({x:r.x??s,y:r.y??o,zoom:r.zoom??a},{duration:i==null?void 0:i.duration})},getViewport:()=>{const[r,i,s]=e.getState().transform;return{x:r,y:i,zoom:s}},fitView:r=>{const{nodes:i,width:s,height:o,nodeOrigin:a,minZoom:c,maxZoom:l,panZoom:u}=e.getState();return u?Bo({nodes:i,width:s,height:o,nodeOrigin:a,minZoom:c,maxZoom:l,panZoom:u},r):!1},setCenter:(r,i,s)=>{const{width:o,height:a,maxZoom:c,panZoom:l}=e.getState(),u=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:c,d=o/2-r*u,f=a/2-i*u;l==null||l.setViewport({x:d,y:f,zoom:u},{duration:s==null?void 0:s.duration})},fitBounds:(r,i)=>{const{width:s,height:o,minZoom:a,maxZoom:c,panZoom:l}=e.getState(),u=mi(r,s,o,a,c,(i==null?void 0:i.padding)??.1);l==null||l.setViewport(u,{duration:i==null?void 0:i.duration})},screenToFlowPosition:(r,i={snapToGrid:!0})=>{const{transform:s,snapGrid:o,domNode:a}=e.getState();if(!a)return r;const{x:c,y:l}=a.getBoundingClientRect(),u={x:r.x-c,y:r.y-l};return gr(u,s,i.snapToGrid,o)},flowToScreenPosition:r=>{const{transform:i,domNode:s}=e.getState();if(!s)return r;const{x:o,y:a}=s.getBoundingClientRect(),c=jo(r,i);return{x:c.x+o,y:c.y+a}},viewportInitialized:t}),[t])};function _s(e,t){for(const[n,r]of e.entries())if(r.id===t.parentNode){const i={...r};i.computed??(i.computed={});const s=t.position.x+t.computed.width-i.computed.width,o=t.position.y+t.computed.height-i.computed.height;if(s>0||o>0||t.position.x<0||t.position.y<0){if(i.width=i.width??i.computed.width,i.height=i.height??i.computed.height,s>0&&(i.width+=s),o>0&&(i.height+=o),t.position.x<0){const a=Math.abs(t.position.x);i.position.x=i.position.x-a,i.width+=a,t.position.x=0}if(t.position.y<0){const a=Math.abs(t.position.y);i.position.y=i.position.y-a,i.height+=a,t.position.y=0}i.computed.width=i.width,i.computed.height=i.height,e[n]=i}break}}function ya(e,t){const n=[],r=new Map;for(const i of e)if(i.type==="add"){n.push(i.item);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const s=r.get(i.id);s?s.push(i):r.set(i.id,[i])}for(const i of t){const s=r.get(i.id);if(!s){n.push(i);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const o={...i};for(const a of s)pm(a,o,n);n.push(o)}return n}function pm(e,t,n=[]){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.positionAbsolute<"u"&&(t.computed??(t.computed={}),t.computed.positionAbsolute=e.positionAbsolute),typeof e.dragging<"u"&&(t.dragging=e.dragging),t.expandParent&&_s(n,t);break}case"dimensions":{typeof e.dimensions<"u"&&(t.computed??(t.computed={}),t.computed.width=e.dimensions.width,t.computed.height=e.dimensions.height,e.resizing&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing),t.expandParent&&_s(n,t);break}}}function gm(e,t){return ya(e,t)}function mm(e,t){return ya(e,t)}function ut(e,t){return{id:e,type:"select",selected:t}}function Nt(e,t=new Set,n=!1){const r=[];for(const i of e){const s=t.has(i.id);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),r.push(ut(i.id,s)))}return r}function bs({items:e=[],lookup:t}){const n=[],r=new Map(e.map(i=>[i.id,i]));for(const i of e){const s=t.get(i.id);s!==void 0&&s!==i&&n.push({id:i.id,item:i,type:"replace"}),s===void 0&&n.push({item:i,type:"add"})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}const ym=e=>Ip(e);function xi(){const e=hm(),t=he(),n=ue(()=>t.getState().nodes.map(m=>({...m})),[]),r=ue(m=>t.getState().nodeLookup.get(m),[]),i=ue(()=>{const{edges:m=[]}=t.getState();return m.map(w=>({...w}))},[]),s=ue(m=>{const{edges:w=[]}=t.getState();return w.find(E=>E.id===m)},[]),o=oe({nodes:[],edges:[]}),[a,c]=yt(!1);Xc(()=>{if(!a){o.current={nodes:[],edges:[]};return}if(o.current.nodes.length){const{nodes:m=[],setNodes:w,hasDefaultNodes:E,onNodesChange:N,nodeLookup:I}=t.getState();let D=m;for(const T of o.current.nodes)D=typeof T=="function"?T(D):T;E?w(D):N&&N(bs({items:D,lookup:I})),o.current.nodes=[]}if(o.current.edges.length){const{edges:m=[],setEdges:w,hasDefaultEdges:E,onEdgesChange:N,edgeLookup:I}=t.getState();let D=m;for(const T of o.current.edges)D=typeof T=="function"?T(D):T;E?w(D):N&&N(bs({items:D,lookup:I})),o.current.edges=[]}c(!1)},[a]);const l=ue(m=>{o.current.nodes.push(m),c(!0)},[]),u=ue(m=>{o.current.edges.push(m),c(!0)},[]),d=ue(m=>{const w=Array.isArray(m)?m:[m];o.current.nodes.push(E=>[...E,...w]),c(!0)},[]),f=ue(m=>{const w=Array.isArray(m)?m:[m];o.current.edges.push(E=>[...E,...w]),c(!0)},[]),g=ue(()=>{const{nodes:m=[],edges:w=[],transform:E}=t.getState(),[N,I,D]=E;return{nodes:m.map(T=>({...T})),edges:w.map(T=>({...T})),viewport:{x:N,y:I,zoom:D}}},[]),y=ue(async({nodes:m=[],edges:w=[]})=>{const{nodes:E,edges:N,hasDefaultNodes:I,hasDefaultEdges:D,onNodesDelete:T,onEdgesDelete:R,onNodesChange:A,onEdgesChange:S,onDelete:p,onBeforeDelete:M}=t.getState(),{nodes:_,edges:$}=await zp({nodesToRemove:m,edgesToRemove:w,nodes:E,edges:N,onBeforeDelete:M}),P=$.length>0,L=_.length>0;if(P){if(D){const V=N.filter(H=>!$.some(Z=>Z.id===H.id));t.getState().setEdges(V)}R==null||R($),S==null||S($.map(V=>({id:V.id,type:"remove"})))}if(L){if(I){const V=E.filter(H=>!_.some(Z=>Z.id===H.id));t.getState().setNodes(V)}T==null||T(_),A==null||A(_.map(V=>({id:V.id,type:"remove"})))}return(L||P)&&(p==null||p({nodes:_,edges:$})),{deletedNodes:_,deletedEdges:$}},[]),b=ue(m=>{const w=Dp(m),E=w?null:t.getState().nodeLookup.get(m.id);return!w&&!E?[null,null,w]:[w?m:Fr(E),E,w]},[]),k=ue((m,w=!0,E)=>{const[N,I,D]=b(m);return N?(E||t.getState().nodes).filter(T=>{var p;if(!D&&(T.id===I.id||!((p=T.computed)!=null&&p.positionAbsolute)))return!1;const R=Fr(T),A=Jn(R,N);return w&&A>0||A>=N.width*N.height}):[]},[]),x=ue((m,w,E=!0)=>{const[N]=b(m);if(!N)return!1;const I=Jn(N,w);return E&&I>0||I>=N.width*N.height},[]),v=ue((m,w,E={replace:!0})=>{l(N=>N.map(I=>{if(I.id===m){const D=typeof w=="function"?w(I):w;return E.replace&&ym(D)?D:{...I,...D}}return I}))},[l]),C=ue((m,w,E={replace:!1})=>{v(m,N=>{const I=typeof w=="function"?w(N):w;return E.replace?{...N,data:I}:{...N,data:{...N.data,...I}}},E)},[v]);return Ve(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:l,setEdges:u,addNodes:d,addEdges:f,toObject:g,deleteElements:y,getIntersectingNodes:k,isNodeIntersecting:x,updateNode:v,updateNodeData:C}),[e,n,r,i,s,l,u,d,f,g,y,k,x,v,C])}const Ss=e=>e.selected,vm={actInsideInputWithModifier:!1};function xm({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=he(),{deleteElements:r}=xi(),i=fn(e,vm),s=fn(t);le(()=>{if(i){const{edges:o,nodes:a}=n.getState();r({nodes:a.filter(Ss),edges:o.filter(Ss)}),n.setState({nodesSelectionActive:!1})}},[i]),le(()=>{n.setState({multiSelectionActive:s})},[s])}function wm(e){const t=he();le(()=>{const n=()=>{var i,s;if(!e.current)return!1;const r=yi(e.current);(r.height===0||r.width===0)&&((s=(i=t.getState()).onError)==null||s.call(i,"004",Ge.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const xr={position:"absolute",width:"100%",height:"100%",top:0,left:0},_m=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function bm({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=mt.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:c,translateExtent:l,minZoom:u,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:g=!0,children:y,noWheelClassName:b,noPanClassName:k,onViewportChange:x,isControlledViewport:v}){const C=he(),m=oe(null),{userSelectionActive:w,lib:E}=re(_m,fe),N=fn(f),I=oe();return wm(m),le(()=>{if(m.current){I.current=hg({domNode:m.current,minZoom:u,maxZoom:d,translateExtent:l,viewport:c,onTransformChange:A=>{x==null||x({x:A[0],y:A[1],zoom:A[2]}),v||C.setState({transform:A})},onDraggingChange:A=>C.setState({paneDragging:A}),onPanZoomStart:(A,S)=>{const{onViewportChangeStart:p,onMoveStart:M}=C.getState();M==null||M(A,S),p==null||p(S)},onPanZoom:(A,S)=>{const{onViewportChange:p,onMove:M}=C.getState();M==null||M(A,S),p==null||p(S)},onPanZoomEnd:(A,S)=>{const{onViewportChangeEnd:p,onMoveEnd:M}=C.getState();M==null||M(A,S),p==null||p(S)}});const{x:D,y:T,zoom:R}=I.current.getViewport();return C.setState({panZoom:I.current,transform:[D,T,R],domNode:m.current.closest(".react-flow")}),()=>{var A;(A=I.current)==null||A.destroy()}}},[]),le(()=>{var D;(D=I.current)==null||D.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:N,preventScrolling:g,noPanClassName:k,userSelectionActive:w,noWheelClassName:b,lib:E})},[e,t,n,r,i,s,o,a,N,g,k,w,b,E]),z("div",{className:"react-flow__renderer",ref:m,style:xr,children:y})}const Sm=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function km(){const{userSelectionActive:e,userSelectionRect:t}=re(Sm,fe);return e&&t?z("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Rr=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Em=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function Nm({isSelecting:e,selectionMode:t=dn.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:l,onPaneMouseLeave:u,children:d}){const f=oe(null),g=he(),y=oe(0),b=oe(0),k=oe(),{userSelectionActive:x,elementsSelectable:v,dragging:C}=re(Em,fe),m=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,b.current=0},w=S=>{s==null||s(S),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},E=S=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){S.preventDefault();return}o==null||o(S)},N=a?S=>a(S):void 0,I=S=>{const{resetSelectedElements:p,domNode:M}=g.getState();if(k.current=M==null?void 0:M.getBoundingClientRect(),!v||!e||S.button!==0||S.target!==f.current||!k.current)return;const{x:_,y:$}=Ue(S.nativeEvent,k.current);p(),g.setState({userSelectionRect:{width:0,height:0,startX:_,startY:$,x:_,y:$}}),r==null||r(S)},D=S=>{const{userSelectionRect:p,edges:M,transform:_,nodeOrigin:$,nodes:P,onNodesChange:L,onEdgesChange:V}=g.getState();if(!e||!k.current||!p)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const H=Ue(S.nativeEvent,k.current),Z=p.startX??0,j=p.startY??0,B={...p,x:H.x<Z?H.x:Z,y:H.y<j?H.y:j,width:Math.abs(H.x-Z),height:Math.abs(H.y-j)},W=Zo(P,B,_,t===dn.Partial,!0,$),ne=new Set,Q=new Set;for(const ee of W){Q.add(ee.id);for(const ae of M)(ae.source===ee.id||ae.target===ee.id)&&ne.add(ae.id)}if(y.current!==Q.size){y.current=Q.size;const ee=Nt(P,Q,!0);ee.length&&(L==null||L(ee))}if(b.current!==ne.size){b.current=ne.size;const ee=Nt(M,ne);ee.length&&(V==null||V(ee))}g.setState({userSelectionRect:B})},T=S=>{if(S.button!==0)return;const{userSelectionRect:p}=g.getState();!x&&p&&S.target===f.current&&(w==null||w(S)),g.setState({nodesSelectionActive:y.current>0}),m(),i==null||i(S)},R=S=>{x&&(g.setState({nodesSelectionActive:y.current>0}),i==null||i(S)),m()},A=v&&(e||x);return ge("div",{className:pe(["react-flow__pane",{dragging:C,selection:e}]),onClick:A?void 0:Rr(w,f),onContextMenu:Rr(E,f),onWheel:Rr(N,f),onMouseEnter:A?void 0:c,onMouseDown:A?I:void 0,onMouseMove:A?D:l,onMouseUp:A?T:void 0,onMouseLeave:A?R:u,ref:f,style:xr,children:[d,z(km,{})]})}function Qr({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:a,onError:c}=t.getState(),l=a.get(e);if(!l){c==null||c("012",Ge.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&o)&&(s({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):i([e])}function va({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s}){const o=he(),[a,c]=yt(!1),l=oe();return le(()=>{e!=null&&e.current&&(l.current=eg({domNode:e.current,getStoreItems:()=>o.getState(),onNodeMouseDown:u=>{Qr({id:u,store:o,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}}))},[]),le(()=>{var u,d;if(t)(u=l.current)==null||u.destroy();else return(d=l.current)==null||d.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i}),()=>{var f;(f=l.current)==null||f.destroy()}},[n,r,t,s,e,i]),a}const Tm=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function xa(){const e=he();return ue(n=>{const{nodeExtent:r,nodes:i,snapToGrid:s,snapGrid:o,nodesDraggable:a,onError:c,updateNodePositions:l,nodeLookup:u,nodeOrigin:d}=e.getState(),f=i.filter(Tm(a)),g=s?o[0]:5,y=s?o[1]:5,b=n.direction.x*g*n.factor,k=n.direction.y*y*n.factor,x=f.map(v=>{var C;if((C=v.computed)!=null&&C.positionAbsolute){let m={x:v.computed.positionAbsolute.x+b,y:v.computed.positionAbsolute.y+k};s&&(m=pr(m,o));const{position:w,positionAbsolute:E}=Xo({nodeId:v.id,nextPosition:m,nodeLookup:u,nodeExtent:r,nodeOrigin:d,onError:c});v.position=w,v.computed.positionAbsolute=E}return v});l(x)},[])}const wi=Rs(null),Cm=wi.Provider;wi.Consumer;const wa=()=>ir(wi),Mm=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Am=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:o}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},_a=zs(({type:e="source",position:t=U.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:c,className:l,onMouseDown:u,onTouchStart:d,...f},g)=>{var T,R;const y=o||null,b=e==="target",k=he(),x=wa(),{connectOnClick:v,noPanClassName:C,rfId:m}=re(Mm,fe),{connecting:w,clickConnecting:E}=re(Am(x,y,e),fe);x||(R=(T=k.getState()).onError)==null||R.call(T,"010",Ge.error010());const N=A=>{const{defaultEdgeOptions:S,onConnect:p,hasDefaultEdges:M}=k.getState(),_={...S,...A};if(M){const{edges:$,setEdges:P}=k.getState();P(Yp(_,$))}p==null||p(_),a==null||a(_)},I=A=>{if(!x)return;const S=Fo(A.nativeEvent);if(i&&(S&&A.button===0||!S)){const p=k.getState();Kr.onPointerDown(A.nativeEvent,{autoPanOnConnect:p.autoPanOnConnect,connectionMode:p.connectionMode,connectionRadius:p.connectionRadius,domNode:p.domNode,nodes:p.nodes,lib:p.lib,isTarget:b,handleId:y,nodeId:x,flowId:p.rfId,panBy:p.panBy,cancelConnection:p.cancelConnection,onConnectStart:p.onConnectStart,onConnectEnd:p.onConnectEnd,updateConnection:p.updateConnection,onConnect:N,isValidConnection:n||p.isValidConnection,getTransform:()=>k.getState().transform})}S?u==null||u(A):d==null||d(A)},D=A=>{const{onClickConnectStart:S,onClickConnectEnd:p,connectionClickStartHandle:M,connectionMode:_,isValidConnection:$,lib:P,rfId:L}=k.getState();if(!x||!M&&!i)return;if(!M){S==null||S(A.nativeEvent,{nodeId:x,handleId:y,handleType:e}),k.setState({connectionClickStartHandle:{nodeId:x,type:e,handleId:y}});return}const V=Uo(A.target),H=n||$,{connection:Z,isValid:j}=Kr.isValid(A.nativeEvent,{handle:{nodeId:x,id:y,type:e},connectionMode:_,fromNodeId:M.nodeId,fromHandleId:M.handleId||null,fromType:M.type,isValidConnection:H,flowId:L,doc:V,lib:P});j&&Z&&N(Z),p==null||p(A),k.setState({connectionClickStartHandle:null})};return z("div",{"data-handleid":y,"data-nodeid":x,"data-handlepos":t,"data-id":`${m}-${x}-${y}-${e}`,className:pe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,l,{source:!b,target:b,connectable:r,connectablestart:i,connectableend:s,connecting:E,connectionindicator:r&&(i&&!w||s&&w)}]),onMouseDown:I,onTouchStart:I,onClick:v?D:void 0,ref:g,...f,children:c})});_a.displayName="Handle";const tr=me(_a);function Im({data:e,isConnectable:t,sourcePosition:n=U.Bottom}){return ge(qe,{children:[e==null?void 0:e.label,z(tr,{type:"source",position:n,isConnectable:t})]})}function $m({data:e,isConnectable:t,targetPosition:n=U.Top,sourcePosition:r=U.Bottom}){return ge(qe,{children:[z(tr,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,z(tr,{type:"source",position:r,isConnectable:t})]})}function Rm(){return null}function zm({data:e,isConnectable:t,targetPosition:n=U.Top}){return ge(qe,{children:[z(tr,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const nr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ks={input:Im,default:$m,output:zm,group:Rm},Pm=e=>{const t=e.nodes.filter(o=>o.selected),{width:n,height:r,x:i,y:s}=vn(t,{nodeOrigin:e.nodeOrigin});return{width:n,height:r,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${i}px,${s}px)`}};function Dm({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=he(),{width:i,height:s,transformString:o,userSelectionActive:a}=re(Pm,fe),c=xa(),l=oe(null);if(le(()=>{var f;n||(f=l.current)==null||f.focus({preventScroll:!0})},[n]),va({nodeRef:l}),a||!i||!s)return null;const u=e?f=>{const g=r.getState().nodes.filter(y=>y.selected);e(f,g)}:void 0,d=f=>{Object.prototype.hasOwnProperty.call(nr,f.key)&&c({direction:nr[f.key],factor:f.shiftKey?4:1})};return z("div",{className:pe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:z("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:i,height:s}})})}const Om=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive}),ba=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,selectionKeyCode:c,selectionOnDrag:l,selectionMode:u,onSelectionStart:d,onSelectionEnd:f,multiSelectionKeyCode:g,panActivationKeyCode:y,zoomActivationKeyCode:b,elementsSelectable:k,zoomOnScroll:x,zoomOnPinch:v,panOnScroll:C,panOnScrollSpeed:m,panOnScrollMode:w,zoomOnDoubleClick:E,panOnDrag:N,defaultViewport:I,translateExtent:D,minZoom:T,maxZoom:R,preventScrolling:A,onSelectionContextMenu:S,noWheelClassName:p,noPanClassName:M,disableKeyboardA11y:_,onViewportChange:$,isControlledViewport:P})=>{const{nodesSelectionActive:L,userSelectionActive:V}=re(Om),H=fn(c),Z=fn(y),j=Z||N,B=Z||C,W=H||V||l&&j!==!0;return xm({deleteKeyCode:a,multiSelectionKeyCode:g}),z(bm,{onPaneContextMenu:s,elementsSelectable:k,zoomOnScroll:x,zoomOnPinch:v,panOnScroll:B,panOnScrollSpeed:m,panOnScrollMode:w,zoomOnDoubleClick:E,panOnDrag:!H&&j,defaultViewport:I,translateExtent:D,minZoom:T,maxZoom:R,zoomActivationKeyCode:b,preventScrolling:A,noWheelClassName:p,noPanClassName:M,onViewportChange:$,isControlledViewport:P,children:ge(Nm,{onSelectionStart:d,onSelectionEnd:f,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:j,isSelecting:!!W,selectionMode:u,children:[e,L&&z(Dm,{onSelectionContextMenu:S,noPanClassName:M,disableKeyboardA11y:_})]})})};ba.displayName="FlowRenderer";const Vm=me(ba),Hm=e=>t=>e?Zo(t.nodes,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Lm(e){return re(ue(Hm(e),[e]),fe)}const Zm=e=>e.updateNodeDimensions;function Bm(){const e=re(Zm),t=oe(),n=Ve(()=>{if(typeof ResizeObserver>"u")return null;const r=new ResizeObserver(i=>{const s=new Map;i.forEach(o=>{const a=o.target.getAttribute("data-id");s.set(a,{id:a,nodeElement:o.target,forceUpdate:!0})}),e(s)});return t.current=r,r},[]);return le(()=>()=>{var r;(r=t==null?void 0:t.current)==null||r.disconnect()},[]),n}function Xm({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:a,elementsSelectable:c,nodesConnectable:l,nodesFocusable:u,resizeObserver:d,noDragClassName:f,noPanClassName:g,disableKeyboardA11y:y,rfId:b,nodeTypes:k,nodeExtent:x,nodeOrigin:v,onError:C}){var bt,ct,St,Be,Ke;const{node:m,positionAbsoluteX:w,positionAbsoluteY:E,zIndex:N,isParent:I}=re(se=>{var Qe,lt,Ht,xn;const xe=se.nodeLookup.get(e),Te=x?hi((Qe=xe.computed)==null?void 0:Qe.positionAbsolute,x):((lt=xe.computed)==null?void 0:lt.positionAbsolute)||{x:0,y:0};return{node:xe,positionAbsoluteX:Te.x,positionAbsoluteY:Te.y,zIndex:((Ht=xe[de])==null?void 0:Ht.z)??0,isParent:!!((xn=xe[de])!=null&&xn.isParent)}},fe);let D=m.type||"default",T=(k==null?void 0:k[D])||ks[D];T===void 0&&(C==null||C("003",Ge.error003(D)),D="default",T=ks.default);const R=!!(m.draggable||a&&typeof m.draggable>"u"),A=!!(m.selectable||c&&typeof m.selectable>"u"),S=!!(m.connectable||l&&typeof m.connectable>"u"),p=!!(m.focusable||u&&typeof m.focusable>"u"),M=he(),_=oe(null),$=oe(m.sourcePosition),P=oe(m.targetPosition),L=oe(D),V=m.width??void 0,H=m.height??void 0,Z=(bt=m.computed)==null?void 0:bt.width,j=(ct=m.computed)==null?void 0:ct.height,B=!!Z&&!!j||!!V&&!!H,W=!!((St=m[de])!=null&&St.handleBounds),ne=xa();le(()=>()=>{_.current&&(d==null||d.unobserve(_.current))},[]),le(()=>{if(_.current&&!m.hidden){const se=_.current;(!B||!W)&&(d==null||d.unobserve(se),d==null||d.observe(se))}},[m.hidden,B,W]),le(()=>{const se=L.current!==D,xe=$.current!==m.sourcePosition,Te=P.current!==m.targetPosition;_.current&&(se||xe||Te)&&(se&&(L.current=D),xe&&($.current=m.sourcePosition),Te&&(P.current=m.targetPosition),M.getState().updateNodeDimensions(new Map([[e,{id:e,nodeElement:_.current,forceUpdate:!0}]])))},[e,D,m.sourcePosition,m.targetPosition]);const Q=va({nodeRef:_,disabled:m.hidden||!R,noDragClassName:f,handleSelector:m.dragHandle,nodeId:e,isSelectable:A});if(m.hidden)return null;const ee=Vp({x:w,y:E,width:Z??V??0,height:j??H??0,origin:m.origin||v}),ae=A||R||t||n||r||i,be=n?se=>n(se,{...m}):void 0,G=r?se=>r(se,{...m}):void 0,ye=i?se=>i(se,{...m}):void 0,ve=s?se=>s(se,{...m}):void 0,Se=o?se=>o(se,{...m}):void 0,De=se=>{const{selectNodesOnDrag:xe,nodeDragThreshold:Te}=M.getState();A&&(!xe||!R||Te>0)&&Qr({id:e,store:M,nodeRef:_}),t&&t(se,{...m})},Vt=se=>{if(!Wr(se.nativeEvent))if(Lo.includes(se.key)&&A){const xe=se.key==="Escape";Qr({id:e,store:M,unselect:xe,nodeRef:_})}else!y&&R&&m.selected&&Object.prototype.hasOwnProperty.call(nr,se.key)&&(M.setState({ariaLiveMessage:`Moved selected node ${se.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~w}, y: ${~~E}`}),ne({direction:nr[se.key],factor:se.shiftKey?4:1}))};return z("div",{className:pe(["react-flow__node",`react-flow__node-${D}`,{[g]:R},m.className,{selected:m.selected,selectable:A,parent:I,dragging:Q}]),ref:_,style:{zIndex:N,transform:`translate(${ee.x}px,${ee.y}px)`,pointerEvents:ae?"all":"none",visibility:B?"visible":"hidden",...m.style,width:V??((Be=m.style)==null?void 0:Be.width),height:H??((Ke=m.style)==null?void 0:Ke.height)},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:be,onMouseMove:G,onMouseLeave:ye,onContextMenu:ve,onClick:De,onDoubleClick:Se,onKeyDown:p?Vt:void 0,tabIndex:p?0:void 0,role:p?"button":void 0,"aria-describedby":y?void 0:`${pa}-${b}`,"aria-label":m.ariaLabel,children:z(Cm,{value:e,children:z(T,{id:e,data:m.data,type:D,width:Z,height:j,positionAbsoluteX:w,positionAbsoluteY:E,selected:m.selected,isConnectable:S,sourcePosition:m.sourcePosition,targetPosition:m.targetPosition,dragging:Q,dragHandle:m.dragHandle,zIndex:N})})})}const Ym=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError}),Sa=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=re(Ym,fe),o=Lm(e.onlyRenderVisibleElements),a=Bm();return z("div",{className:"react-flow__nodes",style:xr,children:o.map(c=>z(Xm,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,nodeOrigin:e.nodeOrigin,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s},c))})};Sa.displayName="NodeRenderer";const jm=me(Sa);function Um(e){return re(ue(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&Zp({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),fe)}const Fm=({color:e="none",strokeWidth:t=1})=>z("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Wm=({color:e="none",strokeWidth:t=1})=>z("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Es={[Kn.Arrow]:Fm,[Kn.ArrowClosed]:Wm};function qm(e){const t=he();return Ve(()=>{var i,s;return Object.prototype.hasOwnProperty.call(Es,e)?Es[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",Ge.error009(e)),null)},[e])}const Gm=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const c=qm(t);return c?z("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:z(c,{color:n,strokeWidth:o})}):null},ka=({defaultColor:e,rfId:t})=>{const n=re(s=>s.edges),r=re(s=>s.defaultEdgeOptions),i=Ve(()=>Gp(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?z("svg",{className:"react-flow__marker",children:z("defs",{children:i.map(s=>z(Gm,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};ka.displayName="MarkerDefinitions";var Km=me(ka);function Ea({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:c,className:l,...u}){const[d,f]=yt({x:1,y:0,width:0,height:0}),g=pe(["react-flow__edge-textwrapper",l]),y=ue(b=>{if(b===null)return;const k=b.getBBox();f({x:k.x,y:k.y,width:k.width,height:k.height})},[]);return typeof n>"u"||!n?null:ge("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:g,visibility:d.width?"visible":"hidden",...u,children:[i&&z("rect",{width:d.width+2*o[0],x:-o[0],y:-o[1],height:d.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),z("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:y,style:r,children:n}),c]})}Ea.displayName="EdgeText";const Qm=me(Ea);function wr({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,className:g,interactionWidth:y=20}){return ge(qe,{children:[z("path",{id:e,style:u,d:t,fill:"none",className:pe(["react-flow__edge-path",g]),markerEnd:d,markerStart:f}),y&&z("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),i&&ht(n)&&ht(r)?z(Qm,{x:n,y:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l}):null]})}function Ns({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===U.Left||e===U.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function Na({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:s=U.Top}){const[o,a]=Ns({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,l]=Ns({pos:s,x1:r,y1:i,x2:e,y2:t}),[u,d,f,g]=Wo({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:c,targetControlY:l});return[`M${e},${t} C${o},${a} ${c},${l} ${r},${i}`,u,d,f,g]}function Ta(e){return me(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=U.Bottom,targetPosition:a=U.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:g,style:y,markerEnd:b,markerStart:k,interactionWidth:x})=>{const[v,C,m]=Na({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a}),w=e.isInternal?void 0:t;return z(wr,{id:w,path:v,labelX:C,labelY:m,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:g,style:y,markerEnd:b,markerStart:k,interactionWidth:x})})}const Jm=Ta({isInternal:!1}),Ca=Ta({isInternal:!0});Jm.displayName="SimpleBezierEdge";Ca.displayName="SimpleBezierEdgeInternal";function Ma(e){return me(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,sourcePosition:g=U.Bottom,targetPosition:y=U.Top,markerEnd:b,markerStart:k,pathOptions:x,interactionWidth:v})=>{const[C,m,w]=qr({sourceX:n,sourceY:r,sourcePosition:g,targetX:i,targetY:s,targetPosition:y,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset}),E=e.isInternal?void 0:t;return z(wr,{id:E,path:C,labelX:m,labelY:w,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:b,markerStart:k,interactionWidth:v})})}const Aa=Ma({isInternal:!1}),Ia=Ma({isInternal:!0});Aa.displayName="SmoothStepEdge";Ia.displayName="SmoothStepEdgeInternal";function $a(e){return me(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return z(Aa,{...n,id:r,pathOptions:Ve(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const ey=$a({isInternal:!1}),Ra=$a({isInternal:!0});ey.displayName="StepEdge";Ra.displayName="StepEdgeInternal";function za(e){return me(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:g,markerStart:y,interactionWidth:b})=>{const[k,x,v]=jp({sourceX:n,sourceY:r,targetX:i,targetY:s}),C=e.isInternal?void 0:t;return z(wr,{id:C,path:k,labelX:x,labelY:v,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:g,markerStart:y,interactionWidth:b})})}const ty=za({isInternal:!1}),Pa=za({isInternal:!0});ty.displayName="StraightEdge";Pa.displayName="StraightEdgeInternal";function Da(e){return me(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=U.Bottom,targetPosition:a=U.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:g,style:y,markerEnd:b,markerStart:k,pathOptions:x,interactionWidth:v})=>{const[C,m,w]=qo({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a,curvature:x==null?void 0:x.curvature}),E=e.isInternal?void 0:t;return z(wr,{id:E,path:C,labelX:m,labelY:w,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:g,style:y,markerEnd:b,markerStart:k,interactionWidth:v})})}const ny=Da({isInternal:!1}),Oa=Da({isInternal:!0});ny.displayName="BezierEdge";Oa.displayName="BezierEdgeInternal";const Ts={default:Oa,straight:Pa,step:Ra,smoothstep:Ia,simplebezier:Ca},Cs={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},ry=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,iy=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,Ms="react-flow__edgeupdater";function As({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a}){return z("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:pe([Ms,`${Ms}-${a}`]),cx:ry(t,r,e),cy:iy(n,r,e),r,stroke:"transparent",fill:"transparent"})}function sy({isUpdatable:e,edgeUpdaterRadius:t,edge:n,targetHandleId:r,sourceHandleId:i,sourceX:s,sourceY:o,targetX:a,targetY:c,sourcePosition:l,targetPosition:u,onEdgeUpdate:d,onEdgeUpdateStart:f,onEdgeUpdateEnd:g,setUpdating:y,setUpdateHover:b}){const k=he(),x=(E,N)=>{if(E.button!==0)return;const{autoPanOnConnect:I,domNode:D,isValidConnection:T,connectionMode:R,connectionRadius:A,lib:S,onConnectStart:p,onConnectEnd:M,cancelConnection:_,nodes:$,rfId:P,panBy:L,updateConnection:V}=k.getState(),H=N?n.target:n.source,Z=(N?r:i)||null,j=N?"target":"source",B=N;y(!0),f==null||f(E,n,j);const W=Q=>{y(!1),g==null||g(Q,n,j)},ne=Q=>d==null?void 0:d(n,Q);Kr.onPointerDown(E.nativeEvent,{autoPanOnConnect:I,connectionMode:R,connectionRadius:A,domNode:D,handleId:Z,nodeId:H,nodes:$,isTarget:B,edgeUpdaterType:j,lib:S,flowId:P,cancelConnection:_,panBy:L,isValidConnection:T,onConnect:ne,onConnectStart:p,onConnectEnd:M,onEdgeUpdateEnd:W,updateConnection:V,getTransform:()=>k.getState().transform})},v=E=>x(E,!0),C=E=>x(E,!1),m=()=>b(!0),w=()=>b(!1);return ge(qe,{children:[(e==="source"||e===!0)&&z(As,{position:l,centerX:s,centerY:o,radius:t,onMouseDown:v,onMouseEnter:m,onMouseOut:w,type:"source"}),(e==="target"||e===!0)&&z(As,{position:u,centerX:a,centerY:c,radius:t,onMouseDown:C,onMouseEnter:m,onMouseOut:w,type:"target"})]})}function oy({id:e,edgesFocusable:t,edgesUpdatable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:a,onMouseMove:c,onMouseLeave:l,edgeUpdaterRadius:u,onEdgeUpdate:d,onEdgeUpdateStart:f,onEdgeUpdateEnd:g,rfId:y,edgeTypes:b,noPanClassName:k,onError:x}){let v=re(G=>G.edgeLookup.get(e));const C=re(G=>G.defaultEdgeOptions);v=C?{...C,...v}:v;let m=v.type||"default",w=(b==null?void 0:b[m])||Ts[m];w===void 0&&(x==null||x("011",Ge.error011(m)),m="default",w=Ts.default);const E=!!(v.focusable||t&&typeof v.focusable>"u"),N=typeof d<"u"&&(v.updatable||n&&typeof v.updatable>"u"),I=!!(v.selectable||r&&typeof v.selectable>"u"),D=oe(null),[T,R]=yt(!1),[A,S]=yt(!1),p=he(),{zIndex:M,sourceX:_,sourceY:$,targetX:P,targetY:L,sourcePosition:V,targetPosition:H}=re(ue(G=>{const ye=G.nodeLookup.get(v.source),ve=G.nodeLookup.get(v.target);if(!ye||!ve)return{zIndex:v.zIndex,...Cs};const Se=qp({id:e,sourceNode:ye,targetNode:ve,sourceHandle:v.sourceHandle||null,targetHandle:v.targetHandle||null,connectionMode:G.connectionMode,onError:x});return{zIndex:Lp({selected:v.selected,zIndex:v.zIndex,sourceNode:ye,targetNode:ve,elevateOnSelect:G.elevateEdgesOnSelect}),...Se||Cs}},[v.source,v.target,v.sourceHandle,v.targetHandle,v.selected,v.zIndex]),fe),Z=Ve(()=>v.markerStart?`url('#${Gr(v.markerStart,y)}')`:void 0,[v.markerStart,y]),j=Ve(()=>v.markerEnd?`url('#${Gr(v.markerEnd,y)}')`:void 0,[v.markerEnd,y]);if(v.hidden||!_||!$||!P||!L)return null;const B=G=>{var De;const{addSelectedEdges:ye,unselectNodesAndEdges:ve,multiSelectionActive:Se}=p.getState();I&&(p.setState({nodesSelectionActive:!1}),v.selected&&Se?(ve({nodes:[],edges:[v]}),(De=D.current)==null||De.blur()):ye([e])),i&&i(G,v)},W=s?G=>{s(G,{...v})}:void 0,ne=o?G=>{o(G,{...v})}:void 0,Q=a?G=>{a(G,{...v})}:void 0,ee=c?G=>{c(G,{...v})}:void 0,ae=l?G=>{l(G,{...v})}:void 0,be=G=>{var ye;if(Lo.includes(G.key)&&I){const{unselectNodesAndEdges:ve,addSelectedEdges:Se}=p.getState();G.key==="Escape"?((ye=D.current)==null||ye.blur(),ve({edges:[v]})):Se([e])}};return z("svg",{style:{zIndex:M},children:ge("g",{className:pe(["react-flow__edge",`react-flow__edge-${m}`,v.className,k,{selected:v.selected,animated:v.animated,inactive:!I&&!i,updating:T,selectable:I}]),onClick:B,onDoubleClick:W,onContextMenu:ne,onMouseEnter:Q,onMouseMove:ee,onMouseLeave:ae,onKeyDown:E?be:void 0,tabIndex:E?0:void 0,role:E?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":v.ariaLabel===null?void 0:v.ariaLabel||`Edge from ${v.source} to ${v.target}`,"aria-describedby":E?`${ga}-${y}`:void 0,ref:D,children:[!A&&z(w,{id:e,source:v.source,target:v.target,selected:v.selected,animated:v.animated,label:v.label,labelStyle:v.labelStyle,labelShowBg:v.labelShowBg,labelBgStyle:v.labelBgStyle,labelBgPadding:v.labelBgPadding,labelBgBorderRadius:v.labelBgBorderRadius,sourceX:_,sourceY:$,targetX:P,targetY:L,sourcePosition:V,targetPosition:H,data:v.data,style:v.style,sourceHandleId:v.sourceHandle,targetHandleId:v.targetHandle,markerStart:Z,markerEnd:j,pathOptions:"pathOptions"in v?v.pathOptions:void 0,interactionWidth:v.interactionWidth}),N&&z(sy,{edge:v,isUpdatable:N,edgeUpdaterRadius:u,onEdgeUpdate:d,onEdgeUpdateStart:f,onEdgeUpdateEnd:g,sourceX:_,sourceY:$,targetX:P,targetY:L,sourcePosition:V,targetPosition:H,setUpdateHover:R,setUpdating:S,sourceHandleId:v.sourceHandle,targetHandleId:v.targetHandle})]})})}const ay=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Va({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onEdgeUpdate:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,edgeUpdaterRadius:d,onEdgeDoubleClick:f,onEdgeUpdateStart:g,onEdgeUpdateEnd:y}){const{edgesFocusable:b,edgesUpdatable:k,elementsSelectable:x,onError:v}=re(ay,fe),C=Um(t);return ge("div",{className:"react-flow__edges",children:[z(Km,{defaultColor:e,rfId:n}),C.map(m=>z(oy,{id:m,edgesFocusable:b,edgesUpdatable:k,elementsSelectable:x,noPanClassName:i,onEdgeUpdate:s,onContextMenu:o,onMouseEnter:a,onMouseMove:c,onMouseLeave:l,onClick:u,edgeUpdaterRadius:d,onDoubleClick:f,onEdgeUpdateStart:g,onEdgeUpdateEnd:y,rfId:n,onError:v,edgeTypes:r},m))]})}Va.displayName="EdgeRenderer";const cy=me(Va),ly=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function uy({children:e}){const t=re(ly);return z("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function dy(e){const t=xi(),n=oe(!1);le(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const fy=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function hy(e){const t=re(fy),n=he();return le(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}const py={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top},Ha=({nodeId:e,handleType:t,style:n,type:r=rt.Bezier,CustomComponent:i,connectionStatus:s})=>{var E,N,I,D,T,R,A;const{fromNode:o,handleId:a,toX:c,toY:l,connectionMode:u}=re(ue(S=>{var p;return{fromNode:S.nodeLookup.get(e),handleId:(p=S.connectionStartHandle)==null?void 0:p.handleId,toX:(S.connectionPosition.x-S.transform[0])/S.transform[2],toY:(S.connectionPosition.y-S.transform[1])/S.transform[2],connectionMode:S.connectionMode}},[e]),fe),d=(E=o==null?void 0:o[de])==null?void 0:E.handleBounds;let f=d==null?void 0:d[t];if(u===zt.Loose&&(f=f||(d==null?void 0:d[t==="source"?"target":"source"])),!o||!f)return null;const g=a?f.find(S=>S.id===a):f[0],y=g?g.x+g.width/2:(((N=o.computed)==null?void 0:N.width)??0)/2,b=g?g.y+g.height/2:((I=o.computed)==null?void 0:I.height)??0,k=(((T=(D=o.computed)==null?void 0:D.positionAbsolute)==null?void 0:T.x)??0)+y,x=(((A=(R=o.computed)==null?void 0:R.positionAbsolute)==null?void 0:A.y)??0)+b,v=g==null?void 0:g.position,C=v?py[v]:null;if(!v||!C)return null;if(i)return z(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:g,fromX:k,fromY:x,toX:c,toY:l,fromPosition:v,toPosition:C,connectionStatus:s});let m="";const w={sourceX:k,sourceY:x,sourcePosition:v,targetX:c,targetY:l,targetPosition:C};return r===rt.Bezier?[m]=qo(w):r===rt.Step?[m]=qr({...w,borderRadius:0}):r===rt.SmoothStep?[m]=qr(w):r===rt.SimpleBezier?[m]=Na(w):m=`M${k},${x} ${c},${l}`,z("path",{d:m,fill:"none",className:"react-flow__connection-path",style:n})};Ha.displayName="ConnectionLine";const gy=e=>{var t,n;return{nodeId:(t=e.connectionStartHandle)==null?void 0:t.nodeId,handleType:(n=e.connectionStartHandle)==null?void 0:n.type,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height}};function my({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:o,width:a,height:c,connectionStatus:l}=re(gy,fe);return!(i&&s&&a&&o)?null:z("svg",{style:e,width:a,height:c,className:"react-flow__connectionline react-flow__container",children:z("g",{className:pe(["react-flow__connection",l]),children:z(Ha,{nodeId:i,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:l})})})}const yy={};function Is(e=yy){oe(0),he(),le(()=>{},[e])}function La({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:g,connectionLineType:y,connectionLineStyle:b,connectionLineComponent:k,connectionLineContainerStyle:x,selectionKeyCode:v,selectionOnDrag:C,selectionMode:m,multiSelectionKeyCode:w,panActivationKeyCode:E,zoomActivationKeyCode:N,deleteKeyCode:I,onlyRenderVisibleElements:D,elementsSelectable:T,defaultViewport:R,translateExtent:A,minZoom:S,maxZoom:p,preventScrolling:M,defaultMarkerColor:_,zoomOnScroll:$,zoomOnPinch:P,panOnScroll:L,panOnScrollSpeed:V,panOnScrollMode:H,zoomOnDoubleClick:Z,panOnDrag:j,onPaneClick:B,onPaneMouseEnter:W,onPaneMouseMove:ne,onPaneMouseLeave:Q,onPaneScroll:ee,onPaneContextMenu:ae,onEdgeUpdate:be,onEdgeContextMenu:G,onEdgeMouseEnter:ye,onEdgeMouseMove:ve,onEdgeMouseLeave:Se,edgeUpdaterRadius:De,onEdgeUpdateStart:Vt,onEdgeUpdateEnd:bt,noDragClassName:ct,noWheelClassName:St,noPanClassName:Be,disableKeyboardA11y:Ke,nodeOrigin:se,nodeExtent:xe,rfId:Te,viewport:Qe,onViewportChange:lt}){return Is(e),Is(t),dy(n),hy(Qe),z(Vm,{onPaneClick:B,onPaneMouseEnter:W,onPaneMouseMove:ne,onPaneMouseLeave:Q,onPaneContextMenu:ae,onPaneScroll:ee,deleteKeyCode:I,selectionKeyCode:v,selectionOnDrag:C,selectionMode:m,onSelectionStart:f,onSelectionEnd:g,multiSelectionKeyCode:w,panActivationKeyCode:E,zoomActivationKeyCode:N,elementsSelectable:T,zoomOnScroll:$,zoomOnPinch:P,zoomOnDoubleClick:Z,panOnScroll:L,panOnScrollSpeed:V,panOnScrollMode:H,panOnDrag:j,defaultViewport:R,translateExtent:A,minZoom:S,maxZoom:p,onSelectionContextMenu:d,preventScrolling:M,noDragClassName:ct,noWheelClassName:St,noPanClassName:Be,disableKeyboardA11y:Ke,onViewportChange:lt,isControlledViewport:!!Qe,children:ge(uy,{children:[z(cy,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onEdgeUpdate:be,onlyRenderVisibleElements:D,onEdgeContextMenu:G,onEdgeMouseEnter:ye,onEdgeMouseMove:ve,onEdgeMouseLeave:Se,onEdgeUpdateStart:Vt,onEdgeUpdateEnd:bt,edgeUpdaterRadius:De,defaultMarkerColor:_,noPanClassName:Be,disableKeyboardA11y:Ke,rfId:Te}),z(my,{style:b,type:y,component:k,containerStyle:x}),z("div",{className:"react-flow__edgelabel-renderer"}),z("div",{className:"react-flow__viewport-portal"}),z(jm,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,onlyRenderVisibleElements:D,noPanClassName:Be,noDragClassName:ct,disableKeyboardA11y:Ke,nodeOrigin:se,nodeExtent:xe,rfId:Te})]})})}La.displayName="GraphView";const vy=me(La),$s=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o}={})=>{const a=new Map,c=new Map,l=new Map,u=r??t??[],d=n??e??[];ea(c,l,u);const f=Qo(d,a,{nodeOrigin:[0,0],elevateNodesOnSelect:!1});let g=[0,0,1];if(o&&i&&s){const y=f.filter(C=>C.width&&C.height),b=vn(y,{nodeOrigin:[0,0]}),{x:k,y:x,zoom:v}=mi(b,i,s,.5,2,.1);g=[k,x,v]}return{rfId:"1",width:0,height:0,transform:g,nodes:f,nodeLookup:a,edges:u,edgeLookup:l,connectionLookup:c,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Gn,nodeExtent:Gn,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:zt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Op,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react"}},xy=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o})=>Fg((a,c)=>({...$s({nodes:e,edges:t,width:i,height:s,fitView:o,defaultNodes:n,defaultEdges:r}),setNodes:l=>{const{nodeLookup:u,nodeOrigin:d,elevateNodesOnSelect:f}=c(),g=Qo(l,u,{nodeOrigin:d,elevateNodesOnSelect:f});a({nodes:g})},setEdges:l=>{const{connectionLookup:u,edgeLookup:d}=c();ea(u,d,l),a({edges:l})},setDefaultNodesAndEdges:(l,u)=>{if(l){const{setNodes:d}=c();d(l),a({hasDefaultNodes:!0})}if(u){const{setEdges:d}=c();d(u),a({hasDefaultEdges:!0})}},updateNodeDimensions:l=>{const{onNodesChange:u,fitView:d,nodes:f,nodeLookup:g,fitViewOnInit:y,fitViewDone:b,fitViewOnInitOptions:k,domNode:x,nodeOrigin:v}=c(),C=[],m=Kp(l,f,g,x,v,(N,I)=>{C.push({id:N,type:"dimensions",dimensions:I})});if(!m)return;const w=Ko(m,g,v);let E=b;!b&&y&&(E=d(w,{...k,nodes:(k==null?void 0:k.nodes)||w})),a({nodes:w,fitViewDone:E}),(C==null?void 0:C.length)>0&&(u==null||u(C))},updateNodePositions:(l,u=!1)=>{const d=l.map(f=>{var y;return{id:f.id,type:"position",position:f.position,positionAbsolute:(y=f.computed)==null?void 0:y.positionAbsolute,dragging:u}});c().triggerNodeChanges(d)},triggerNodeChanges:l=>{const{onNodesChange:u,setNodes:d,nodes:f,hasDefaultNodes:g}=c();if(l!=null&&l.length){if(g){const y=gm(l,f);d(y)}u==null||u(l)}},triggerEdgeChanges:l=>{const{onEdgesChange:u,setEdges:d,edges:f,hasDefaultEdges:g}=c();if(l!=null&&l.length){if(g){const y=mm(l,f);d(y)}u==null||u(l)}},addSelectedNodes:l=>{const{multiSelectionActive:u,edges:d,nodes:f,triggerNodeChanges:g,triggerEdgeChanges:y}=c();if(u){const b=l.map(k=>ut(k,!0));g(b);return}g(Nt(f,new Set([...l]),!0)),y(Nt(d))},addSelectedEdges:l=>{const{multiSelectionActive:u,edges:d,nodes:f,triggerNodeChanges:g,triggerEdgeChanges:y}=c();if(u){const b=l.map(k=>ut(k,!0));y(b);return}y(Nt(d,new Set([...l]))),g(Nt(f,new Set,!0))},unselectNodesAndEdges:({nodes:l,edges:u}={})=>{const{edges:d,nodes:f,triggerNodeChanges:g,triggerEdgeChanges:y}=c(),b=l||f,k=u||d,x=b.map(C=>(C.selected=!1,ut(C.id,!1))),v=k.map(C=>ut(C.id,!1));g(x),y(v)},setMinZoom:l=>{const{panZoom:u,maxZoom:d}=c();u==null||u.setScaleExtent([l,d]),a({minZoom:l})},setMaxZoom:l=>{const{panZoom:u,minZoom:d}=c();u==null||u.setScaleExtent([d,l]),a({maxZoom:l})},setTranslateExtent:l=>{var u;(u=c().panZoom)==null||u.setTranslateExtent(l),a({translateExtent:l})},resetSelectedElements:()=>{const{edges:l,nodes:u,triggerNodeChanges:d,triggerEdgeChanges:f}=c(),g=u.reduce((b,k)=>k.selected?[...b,ut(k.id,!1)]:b,[]),y=l.reduce((b,k)=>k.selected?[...b,ut(k.id,!1)]:b,[]);d(g),f(y)},setNodeExtent:l=>{const{nodes:u}=c();a({nodeExtent:l,nodes:u.map(d=>{const f=hi(d.position,l);return{...d,computed:{...d.computed,positionAbsolute:f}}})})},panBy:l=>{const{transform:u,width:d,height:f,panZoom:g,translateExtent:y}=c();return Qp({delta:l,panZoom:g,transform:u,translateExtent:y,width:d,height:f})},fitView:(l,u)=>{const{panZoom:d,width:f,height:g,minZoom:y,maxZoom:b,nodeOrigin:k}=c();return d?Bo({nodes:l,width:f,height:g,panZoom:d,minZoom:y,maxZoom:b,nodeOrigin:k},u):!1},cancelConnection:()=>a({connectionStatus:null,connectionStartHandle:null,connectionEndHandle:null}),updateConnection:l=>{const{connectionStatus:u,connectionStartHandle:d,connectionEndHandle:f,connectionPosition:g}=c(),y={connectionPosition:l.connectionPosition??g,connectionStatus:l.connectionStatus??u,connectionStartHandle:l.connectionStartHandle??d,connectionEndHandle:l.connectionEndHandle??f};a(y)},reset:()=>a({...$s()})}),Object.is);function wy({children:e,initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:a}){const c=oe(null);return c.current||(c.current=xy({nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:a})),z(Wg,{value:c.current,children:e})}function _y({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:a}){return ir(vr)?z(qe,{children:e}):z(wy,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:a,children:e})}const by={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Za=zs(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:a,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:g,onConnectStart:y,onConnectEnd:b,onClickConnectStart:k,onClickConnectEnd:x,onNodeMouseEnter:v,onNodeMouseMove:C,onNodeMouseLeave:m,onNodeContextMenu:w,onNodeDoubleClick:E,onNodeDragStart:N,onNodeDrag:I,onNodeDragStop:D,onNodesDelete:T,onEdgesDelete:R,onDelete:A,onSelectionChange:S,onSelectionDragStart:p,onSelectionDrag:M,onSelectionDragStop:_,onSelectionContextMenu:$,onSelectionStart:P,onSelectionEnd:L,onBeforeDelete:V,connectionMode:H,connectionLineType:Z=rt.Bezier,connectionLineStyle:j,connectionLineComponent:B,connectionLineContainerStyle:W,deleteKeyCode:ne="Backspace",selectionKeyCode:Q="Shift",selectionOnDrag:ee=!1,selectionMode:ae=dn.Full,panActivationKeyCode:be="Space",multiSelectionKeyCode:G=er()?"Meta":"Control",zoomActivationKeyCode:ye=er()?"Meta":"Control",snapToGrid:ve,snapGrid:Se,onlyRenderVisibleElements:De=!1,selectNodesOnDrag:Vt,nodesDraggable:bt,nodesConnectable:ct,nodesFocusable:St,nodeOrigin:Be=ma,edgesFocusable:Ke,edgesUpdatable:se,elementsSelectable:xe=!0,defaultViewport:Te=am,minZoom:Qe=.5,maxZoom:lt=2,translateExtent:Ht=Gn,preventScrolling:xn=!0,nodeExtent:bi,defaultMarkerColor:Fa="#b1b1b7",zoomOnScroll:Wa=!0,zoomOnPinch:qa=!0,panOnScroll:Ga=!1,panOnScrollSpeed:Ka=.5,panOnScrollMode:Qa=mt.Free,zoomOnDoubleClick:Ja=!0,panOnDrag:ec=!0,onPaneClick:tc,onPaneMouseEnter:nc,onPaneMouseMove:rc,onPaneMouseLeave:ic,onPaneScroll:sc,onPaneContextMenu:oc,children:ac,onEdgeUpdate:cc,onEdgeContextMenu:lc,onEdgeDoubleClick:uc,onEdgeMouseEnter:dc,onEdgeMouseMove:fc,onEdgeMouseLeave:hc,onEdgeUpdateStart:pc,onEdgeUpdateEnd:gc,edgeUpdaterRadius:mc=10,onNodesChange:yc,onEdgesChange:vc,noDragClassName:xc="nodrag",noWheelClassName:wc="nowheel",noPanClassName:Si="nopan",fitView:ki,fitViewOptions:_c,connectOnClick:bc,attributionPosition:Sc,proOptions:kc,defaultEdgeOptions:Ec,elevateNodesOnSelect:Nc,elevateEdgesOnSelect:Tc,disableKeyboardA11y:Ei=!1,autoPanOnConnect:Cc,autoPanOnNodeDrag:Mc,connectionRadius:Ac,isValidConnection:Ic,onError:$c,style:Rc,id:Ni,nodeDragThreshold:zc,viewport:Pc,onViewportChange:Dc,width:Oc,height:Vc,colorMode:Hc="light",...Lc},Zc)=>{const _r=Ni||"1",Bc=dm(Hc);return z("div",{...Lc,style:{...Rc,...by},ref:Zc,className:pe(["react-flow",i,Bc]),"data-testid":"rf__wrapper",id:Ni,children:ge(_y,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:Oc,height:Vc,fitView:ki,children:[z(vy,{onInit:l,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:v,onNodeMouseMove:C,onNodeMouseLeave:m,onNodeContextMenu:w,onNodeDoubleClick:E,nodeTypes:s,edgeTypes:o,connectionLineType:Z,connectionLineStyle:j,connectionLineComponent:B,connectionLineContainerStyle:W,selectionKeyCode:Q,selectionOnDrag:ee,selectionMode:ae,deleteKeyCode:ne,multiSelectionKeyCode:G,panActivationKeyCode:be,zoomActivationKeyCode:ye,onlyRenderVisibleElements:De,defaultViewport:Te,translateExtent:Ht,minZoom:Qe,maxZoom:lt,preventScrolling:xn,zoomOnScroll:Wa,zoomOnPinch:qa,zoomOnDoubleClick:Ja,panOnScroll:Ga,panOnScrollSpeed:Ka,panOnScrollMode:Qa,panOnDrag:ec,onPaneClick:tc,onPaneMouseEnter:nc,onPaneMouseMove:rc,onPaneMouseLeave:ic,onPaneScroll:sc,onPaneContextMenu:oc,onSelectionContextMenu:$,onSelectionStart:P,onSelectionEnd:L,onEdgeUpdate:cc,onEdgeContextMenu:lc,onEdgeDoubleClick:uc,onEdgeMouseEnter:dc,onEdgeMouseMove:fc,onEdgeMouseLeave:hc,onEdgeUpdateStart:pc,onEdgeUpdateEnd:gc,edgeUpdaterRadius:mc,defaultMarkerColor:Fa,noDragClassName:xc,noWheelClassName:wc,noPanClassName:Si,rfId:_r,disableKeyboardA11y:Ei,nodeOrigin:Be,nodeExtent:bi,viewport:Pc,onViewportChange:Dc}),z(um,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:y,onConnectEnd:b,onClickConnectStart:k,onClickConnectEnd:x,nodesDraggable:bt,nodesConnectable:ct,nodesFocusable:St,edgesFocusable:Ke,edgesUpdatable:se,elementsSelectable:xe,elevateNodesOnSelect:Nc,elevateEdgesOnSelect:Tc,minZoom:Qe,maxZoom:lt,nodeExtent:bi,onNodesChange:yc,onEdgesChange:vc,snapToGrid:ve,snapGrid:Se,connectionMode:H,translateExtent:Ht,connectOnClick:bc,defaultEdgeOptions:Ec,fitView:ki,fitViewOptions:_c,onNodesDelete:T,onEdgesDelete:R,onDelete:A,onNodeDragStart:N,onNodeDrag:I,onNodeDragStop:D,onSelectionDrag:M,onSelectionDragStart:p,onSelectionDragStop:_,onMove:u,onMoveStart:d,onMoveEnd:f,noPanClassName:Si,nodeOrigin:Be,rfId:_r,autoPanOnConnect:Cc,autoPanOnNodeDrag:Mc,onError:$c,connectionRadius:Ac,isValidConnection:Ic,selectNodesOnDrag:Vt,nodeDragThreshold:zc,onBeforeDelete:V}),z(om,{onSelectionChange:S}),ac,z(tm,{proOptions:kc,position:Sc}),z(Jg,{rfId:_r,disableKeyboardA11y:Ei})]})})});Za.displayName="ReactFlow";function Sy({dimensions:e,lineWidth:t,variant:n,className:r}){return z("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:pe(["react-flow__background-pattern",n,r])})}function ky({radius:e,className:t}){return z("circle",{cx:e,cy:e,r:e,className:pe(["react-flow__background-pattern","dots",t])})}var it;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(it||(it={}));const Ey={[it.Dots]:1,[it.Lines]:1,[it.Cross]:6},Ny=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ba({id:e,variant:t=it.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:o,bgColor:a,style:c,className:l,patternClassName:u}){const d=oe(null),{transform:f,patternId:g}=re(Ny,fe),y=r||Ey[t],b=t===it.Dots,k=t===it.Cross,x=Array.isArray(n)?n:[n,n],v=[x[0]*f[2]||1,x[1]*f[2]||1],C=y*f[2],m=k?[C,C]:v,w=b?[C/s,C/s]:[m[0]/s,m[1]/s],E=`${g}${e||""}`;return ge("svg",{className:pe(["react-flow__background",l]),style:{...c,...xr,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:d,"data-testid":"rf__background",children:[z("pattern",{id:E,x:f[0]%v[0],y:f[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`,children:b?z(ky,{radius:C/s,className:u}):z(Sy,{dimensions:m,lineWidth:i,variant:t,className:u})}),z("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}Ba.displayName="Background";const Ty=me(Ba);function Cy(){return z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:z("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function My(){return z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:z("path",{d:"M0 0h32v4.2H0z"})})}function Ay(){return z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:z("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Iy(){return z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:z("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function $y(){return z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:z("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Mn({children:e,className:t,...n}){return z("button",{type:"button",className:pe(["react-flow__controls-button",t]),...n,children:e})}const Ry=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Xa({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:c,className:l,children:u,position:d="bottom-left","aria-label":f="React Flow controls"}){const g=he(),{isInteractive:y,minZoomReached:b,maxZoomReached:k}=re(Ry,fe),{zoomIn:x,zoomOut:v,fitView:C}=xi(),m=()=>{x(),s==null||s()},w=()=>{v(),o==null||o()},E=()=>{C(i),a==null||a()},N=()=>{g.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c==null||c(!y)};return ge(vi,{className:pe(["react-flow__controls",l]),position:d,style:e,"data-testid":"rf__controls","aria-label":f,children:[t&&ge(qe,{children:[z(Mn,{onClick:m,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:k,children:z(Cy,{})}),z(Mn,{onClick:w,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b,children:z(My,{})})]}),n&&z(Mn,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view",children:z(Ay,{})}),r&&z(Mn,{className:"react-flow__controls-interactive",onClick:N,title:"toggle interactivity","aria-label":"toggle interactivity",children:y?z($y,{}):z(Iy,{})}),u]})}Xa.displayName="Controls";const zy=me(Xa);function Py({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:c,className:l,borderRadius:u,shapeRendering:d,selected:f,onClick:g}){const{background:y,backgroundColor:b}=s||{},k=o||y||b;return z("rect",{className:pe(["react-flow__minimap-node",{selected:f},l]),x:t,y:n,rx:u,ry:u,width:r,height:i,style:{fill:k,stroke:a,strokeWidth:c},shapeRendering:d,onClick:g?x=>g(x,e):void 0})}const Dy=me(Py),Oy=e=>e.nodeOrigin,Vy=e=>e.nodes.map(t=>t.id),zr=e=>e instanceof Function?e:()=>e;function Hy({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Dy,onClick:o}){const a=re(Vy,fe),c=re(Oy),l=zr(t),u=zr(e),d=zr(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return z(qe,{children:a.map(g=>z(Ly,{id:g,nodeOrigin:c,nodeColorFunc:l,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:f},g))})}const Ly=me(function({id:t,nodeOrigin:n,nodeColorFunc:r,nodeStrokeColorFunc:i,nodeClassNameFunc:s,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:c,NodeComponent:l,onClick:u}){var y,b,k,x;const{node:d,x:f,y:g}=re(v=>{const C=v.nodeLookup.get(t),{x:m,y:w}=Ot(C,(C==null?void 0:C.origin)||n).positionAbsolute;return{node:C,x:m,y:w}},fe);return!d||d.hidden||!((y=d.computed)!=null&&y.width||d.width)||!((b=d.computed)!=null&&b.height||d.height)?null:z(l,{x:f,y:g,width:((k=d.computed)==null?void 0:k.width)??d.width??0,height:((x=d.computed)==null?void 0:x.height)??d.height??0,style:d.style,selected:!!d.selected,className:s(d),color:r(d),borderRadius:o,strokeColor:i(d),strokeWidth:a,shapeRendering:c,onClick:u,id:d.id})});var Zy=me(Hy);const By=200,Xy=150,Yy=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodes.length>0?Pp(vn(e.nodes,{nodeOrigin:e.nodeOrigin}),t):t,rfId:e.rfId,nodeOrigin:e.nodeOrigin,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},jy="react-flow__minimap-desc";function Ya({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:c,maskColor:l,maskStrokeColor:u,maskStrokeWidth:d,position:f="bottom-right",onClick:g,onNodeClick:y,pannable:b=!1,zoomable:k=!1,ariaLabel:x="React Flow mini map",inversePan:v,zoomStep:C=10,offsetScale:m=5}){const w=he(),E=oe(null),{boundingRect:N,viewBB:I,rfId:D,panZoom:T,translateExtent:R,flowWidth:A,flowHeight:S}=re(Yy,fe),p=(e==null?void 0:e.width)??By,M=(e==null?void 0:e.height)??Xy,_=N.width/p,$=N.height/M,P=Math.max(_,$),L=P*p,V=P*M,H=m*P,Z=N.x-(L-N.width)/2-H,j=N.y-(V-N.height)/2-H,B=L+H*2,W=V+H*2,ne=`${jy}-${D}`,Q=oe(0),ee=oe();Q.current=P,le(()=>{if(E.current&&T)return ee.current=sg({domNode:E.current,panZoom:T,getTransform:()=>w.getState().transform,getViewScale:()=>Q.current}),()=>{var G;(G=ee.current)==null||G.destroy()}},[T]),le(()=>{var G;(G=ee.current)==null||G.update({translateExtent:R,width:A,height:S,inversePan:v,pannable:b,zoomStep:C,zoomable:k})},[b,k,v,C,R,A,S]);const ae=g?G=>{var Se;const[ye,ve]=((Se=ee.current)==null?void 0:Se.pointer(G))||[0,0];g(G,{x:ye,y:ve})}:void 0,be=y?ue((G,ye)=>{const ve=w.getState().nodeLookup.get(ye);y(G,ve)},[]):void 0;return z(vi,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*P:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:pe(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:ge("svg",{width:p,height:M,viewBox:`${Z} ${j} ${B} ${W}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ne,ref:E,onClick:ae,children:[x&&z("title",{id:ne,children:x}),z(Zy,{onClick:be,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),z("path",{className:"react-flow__minimap-mask",d:`M${Z-H},${j-H}h${B+H*2}v${W+H*2}h${-B-H*2}z
        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Ya.displayName="MiniMap";me(Ya);function Uy({nodeId:e,position:t,variant:n=Ut.Handle,className:r,style:i={},children:s,color:o,minWidth:a=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:g,onResize:y,onResizeEnd:b}){const k=wa(),x=typeof e=="string"?e:k,v=he(),C=oe(null),m=n===Ut.Line?"right":"bottom-right",w=t??m,E=oe(null);le(()=>{if(!(!C.current||!x))return E.current||(E.current=_g({domNode:C.current,nodeId:x,getStoreItems:()=>{const{nodeLookup:T,transform:R,snapGrid:A,snapToGrid:S}=v.getState();return{nodeLookup:T,transform:R,snapGrid:A,snapToGrid:S}},onChange:(T,R)=>{const{triggerNodeChanges:A}=v.getState(),S=[];if(T.isXPosChange||T.isYPosChange){const p={id:x,type:"position",position:{x:T.x,y:T.y}};S.push(p)}if(T.isWidthChange||T.isHeightChange){const p={id:x,type:"dimensions",resizing:!0,dimensions:{width:T.width,height:T.height}};S.push(p)}for(const p of R){const M={...p,type:"position"};S.push(M)}A(S)},onEnd:()=>{const T={id:x,type:"dimensions",resizing:!1};v.getState().triggerNodeChanges([T])}})),E.current.update({controlPosition:w,boundaries:{minWidth:a,minHeight:c,maxWidth:l,maxHeight:u},keepAspectRatio:d,onResizeStart:g,onResize:y,onResizeEnd:b,shouldResize:f}),()=>{var T;(T=E.current)==null||T.destroy()}},[w,a,c,l,u,d,g,y,b,f]);const N=w.split("-"),I=n===Ut.Line?"borderColor":"backgroundColor",D=o?{...i,[I]:o}:i;return z("div",{className:pe(["react-flow__resize-control","nodrag",...N,n,r]),ref:C,style:D,children:s})}me(Uy);const rr=4,hn=160,Jr=250,Fy=[{label:"Server",id:"client-server"},{label:"Mobile App",id:"client-mobile-app"}],ja=Fy.map((e,t)=>({id:e.id,sourcePosition:U.Right,type:"input",data:{label:e.label},position:{x:0,y:rr/2*(t+1)*(hn/2)}})),_i={id:"vidos-universal-resolver",sourcePosition:U.Right,targetPosition:U.Left,data:{label:"Vidos Universal Resolver"},position:{x:Jr,y:rr/2*hn-hn/2}},Ua=[...Qu.slice(0,rr-1).map((e,t)=>({id:e,targetPosition:U.Left,data:{label:`did:${e}`},position:{x:Jr*2,y:t*hn}})),{id:"rest",targetPosition:U.Left,data:{label:"did:..."},position:{x:Jr*2,y:(rr-1)*hn}}],Wy=Ua.map(e=>({id:`horizontal-e1-${e.id}`,source:_i.id,type:"smoothstep",target:e.id,animated:!0})),qy=ja.map(e=>({id:`horizontal-e1-${e.id}`,source:e.id,type:"smoothstep",target:_i.id,animated:!0}));function Gy(){const e=[...ja,_i,...Ua],t=[...qy,...Wy];return z("div",{style:{height:"400px",width:"100%"},children:ge(Za,{fitViewOptions:{padding:0},nodes:e,edgesUpdatable:!1,nodesDraggable:!1,nodesConnectable:!1,edges:t,fitView:!0,children:[z(Ty,{}),z(zy,{showInteractive:!1})]})})}const t0=Object.freeze(Object.defineProperty({__proto__:null,ResolutionComponent:Gy},Symbol.toStringTag,{value:"Module"}));export{Gy as R,t0 as a,Qu as s};
